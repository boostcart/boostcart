{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/lib/tenant.ts"],"sourcesContent":["import type { Tenant } from \"@boostcart/database\";\nimport { db } from \"@/server/db\";\n\n// Cache for tenant lookups\nconst tenantCache = new Map<string, { tenant: Tenant; expiry: number }>();\nconst CACHE_TTL = 60 * 1000; // 1 minute\n\n/**\n * Get tenant by subdomain (slug)\n */\nexport async function getTenantBySlug(slug: string): Promise<Tenant | null> {\n\t// Check cache first\n\tconst cached = tenantCache.get(`slug:${slug}`);\n\tif (cached && cached.expiry > Date.now()) {\n\t\treturn cached.tenant;\n\t}\n\n\tconst tenant = await db.tenant.findFirst({\n\t\twhere: {\n\t\t\tslug,\n\t\t\tisActive: true,\n\t\t\tdeletedAt: null,\n\t\t},\n\t});\n\n\tif (tenant) {\n\t\ttenantCache.set(`slug:${slug}`, {\n\t\t\ttenant,\n\t\t\texpiry: Date.now() + CACHE_TTL,\n\t\t});\n\t}\n\n\treturn tenant;\n}\n\n/**\n * Get tenant by custom domain\n */\nexport async function getTenantByDomain(\n\tdomain: string,\n): Promise<Tenant | null> {\n\t// Check cache first\n\tconst cached = tenantCache.get(`domain:${domain}`);\n\tif (cached && cached.expiry > Date.now()) {\n\t\treturn cached.tenant;\n\t}\n\n\tconst tenantDomain = await db.tenantDomain.findFirst({\n\t\twhere: {\n\t\t\tdomain,\n\t\t\tdnsVerified: true,\n\t\t},\n\t\tinclude: {\n\t\t\ttenant: true,\n\t\t},\n\t});\n\n\tif (tenantDomain?.tenant && tenantDomain.tenant.isActive) {\n\t\ttenantCache.set(`domain:${domain}`, {\n\t\t\ttenant: tenantDomain.tenant,\n\t\t\texpiry: Date.now() + CACHE_TTL,\n\t\t});\n\t\treturn tenantDomain.tenant;\n\t}\n\n\treturn null;\n}\n\n/**\n * Extract tenant from request hostname\n */\nexport async function getTenantFromRequest(\n\thostname: string | null,\n): Promise<Tenant | null> {\n\tif (!hostname) return null;\n\n\t// Remove port if present\n\tconst host = hostname.split(\":\")[0];\n\tif (!host) return null;\n\n\t// Check if it's the main platform domain\n\tconst platformDomains = [\"boostcart.bg\", \"localhost\", \"127.0.0.1\"];\n\tconst isMainDomain = platformDomains.some(\n\t\t(d) => host === d || host === `www.${d}`,\n\t);\n\n\tif (isMainDomain) {\n\t\t// No tenant for main domain\n\t\treturn null;\n\t}\n\n\t// Check for subdomain (e.g., store.boostcart.bg)\n\tconst subdomainMatch = host.match(/^([a-z0-9-]+)\\.boostcart\\.bg$/i);\n\tif (subdomainMatch?.[1]) {\n\t\tconst slug = subdomainMatch[1];\n\t\t// Skip common subdomains\n\t\tif ([\"www\", \"api\", \"admin\", \"staging\", \"dev\"].includes(slug)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn getTenantBySlug(slug);\n\t}\n\n\t// Check for local dev subdomain (e.g., store.localhost)\n\tconst localSubdomainMatch = host.match(/^([a-z0-9-]+)\\.localhost$/i);\n\tif (localSubdomainMatch?.[1]) {\n\t\treturn getTenantBySlug(localSubdomainMatch[1]);\n\t}\n\n\t// Otherwise, check if it's a custom domain\n\treturn getTenantByDomain(host);\n}\n\n/**\n * Clear tenant cache (useful after updates)\n */\nexport function clearTenantCache(identifier?: string) {\n\tif (identifier) {\n\t\ttenantCache.delete(`slug:${identifier}`);\n\t\ttenantCache.delete(`domain:${identifier}`);\n\t} else {\n\t\ttenantCache.clear();\n\t}\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;;;;;;AAEA,2BAA2B;AAC3B,MAAM,cAAc,IAAI;AACxB,MAAM,YAAY,KAAK,MAAM,WAAW;AAKjC,eAAe,gBAAgB,IAAY;IACjD,oBAAoB;IACpB,MAAM,SAAS,YAAY,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM;IAC7C,IAAI,UAAU,OAAO,MAAM,GAAG,KAAK,GAAG,IAAI;QACzC,OAAO,OAAO,MAAM;IACrB;IAEA,MAAM,SAAS,MAAM,6IAAE,CAAC,MAAM,CAAC,SAAS,CAAC;QACxC,OAAO;YACN;YACA,UAAU;YACV,WAAW;QACZ;IACD;IAEA,IAAI,QAAQ;QACX,YAAY,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE;YAC/B;YACA,QAAQ,KAAK,GAAG,KAAK;QACtB;IACD;IAEA,OAAO;AACR;AAKO,eAAe,kBACrB,MAAc;IAEd,oBAAoB;IACpB,MAAM,SAAS,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ;IACjD,IAAI,UAAU,OAAO,MAAM,GAAG,KAAK,GAAG,IAAI;QACzC,OAAO,OAAO,MAAM;IACrB;IAEA,MAAM,eAAe,MAAM,6IAAE,CAAC,YAAY,CAAC,SAAS,CAAC;QACpD,OAAO;YACN;YACA,aAAa;QACd;QACA,SAAS;YACR,QAAQ;QACT;IACD;IAEA,IAAI,cAAc,UAAU,aAAa,MAAM,CAAC,QAAQ,EAAE;QACzD,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ,EAAE;YACnC,QAAQ,aAAa,MAAM;YAC3B,QAAQ,KAAK,GAAG,KAAK;QACtB;QACA,OAAO,aAAa,MAAM;IAC3B;IAEA,OAAO;AACR;AAKO,eAAe,qBACrB,QAAuB;IAEvB,IAAI,CAAC,UAAU,OAAO;IAEtB,yBAAyB;IACzB,MAAM,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;IACnC,IAAI,CAAC,MAAM,OAAO;IAElB,yCAAyC;IACzC,MAAM,kBAAkB;QAAC;QAAgB;QAAa;KAAY;IAClE,MAAM,eAAe,gBAAgB,IAAI,CACxC,CAAC,IAAM,SAAS,KAAK,SAAS,CAAC,IAAI,EAAE,GAAG;IAGzC,IAAI,cAAc;QACjB,4BAA4B;QAC5B,OAAO;IACR;IAEA,iDAAiD;IACjD,MAAM,iBAAiB,KAAK,KAAK,CAAC;IAClC,IAAI,gBAAgB,CAAC,EAAE,EAAE;QACxB,MAAM,OAAO,cAAc,CAAC,EAAE;QAC9B,yBAAyB;QACzB,IAAI;YAAC;YAAO;YAAO;YAAS;YAAW;SAAM,CAAC,QAAQ,CAAC,OAAO;YAC7D,OAAO;QACR;QACA,OAAO,gBAAgB;IACxB;IAEA,wDAAwD;IACxD,MAAM,sBAAsB,KAAK,KAAK,CAAC;IACvC,IAAI,qBAAqB,CAAC,EAAE,EAAE;QAC7B,OAAO,gBAAgB,mBAAmB,CAAC,EAAE;IAC9C;IAEA,2CAA2C;IAC3C,OAAO,kBAAkB;AAC1B;AAKO,SAAS,iBAAiB,UAAmB;IACnD,IAAI,YAAY;QACf,YAAY,MAAM,CAAC,CAAC,KAAK,EAAE,YAAY;QACvC,YAAY,MAAM,CAAC,CAAC,OAAO,EAAE,YAAY;IAC1C,OAAO;QACN,YAAY,KAAK;IAClB;AACD"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/tenant.ts"],"sourcesContent":["\"use server\";\n\nimport type { Tenant } from \"@boostcart/database\";\nimport { headers } from \"next/headers\";\nimport { cache } from \"react\";\nimport { getTenantByDomain, getTenantBySlug } from \"@/lib/tenant\";\nimport { auth } from \"./auth\";\nimport { db } from \"./db\";\n\n/**\n * Get the current tenant from the request context (storefront)\n * This is cached per-request using React's cache()\n */\nexport const getCurrentTenant = cache(async (): Promise<Tenant | null> => {\n\tconst headersList = await headers();\n\n\t// Check for tenant slug from subdomain\n\tconst tenantSlug = headersList.get(\"x-tenant-slug\");\n\tif (tenantSlug) {\n\t\treturn getTenantBySlug(tenantSlug);\n\t}\n\n\t// Check for custom domain\n\tconst customDomain = headersList.get(\"x-custom-domain\");\n\tif (customDomain) {\n\t\treturn getTenantByDomain(customDomain);\n\t}\n\n\treturn null;\n});\n\n/**\n * Get the current tenant for admin context (from user's store ownership)\n * This is used when accessing via boostcart.bg/admin (not subdomain)\n */\nexport const getAdminTenant = cache(async (): Promise<Tenant | null> => {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\treturn null;\n\t}\n\n\t// Get the user's primary store (first store they have access to)\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: { userId: session.user.id },\n\t\tinclude: { tenant: true },\n\t\torderBy: { createdAt: \"asc\" },\n\t});\n\n\treturn staffRecord?.tenant ?? null;\n});\n\n/**\n * Require tenant to be present (storefront context), throws if not found\n */\nexport async function requireTenant(): Promise<Tenant> {\n\tconst tenant = await getCurrentTenant();\n\tif (!tenant) {\n\t\tthrow new Error(\"Tenant not found\");\n\t}\n\treturn tenant;\n}\n\n/**\n * Require tenant for admin operations\n * First checks storefront context, then falls back to user's store\n */\nexport async function requireAdminTenant(): Promise<Tenant> {\n\t// First try storefront context (subdomain access)\n\tconst storefrontTenant = await getCurrentTenant();\n\tif (storefrontTenant) {\n\t\treturn storefrontTenant;\n\t}\n\n\t// Fall back to user's store (main domain admin access)\n\tconst adminTenant = await getAdminTenant();\n\tif (adminTenant) {\n\t\treturn adminTenant;\n\t}\n\n\tthrow new Error(\"No tenant context found. Please create or select a store.\");\n}\n\n/**\n * Check if we're in a tenant context\n */\nexport async function hasTenantContext(): Promise<boolean> {\n\tconst tenant = await getCurrentTenant();\n\treturn tenant !== null;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAMO,MAAM,mBAAmB,IAAA,8MAAK,EAAC;IACrC,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,uCAAuC;IACvC,MAAM,aAAa,YAAY,GAAG,CAAC;IACnC,IAAI,YAAY;QACf,OAAO,IAAA,2JAAe,EAAC;IACxB;IAEA,0BAA0B;IAC1B,MAAM,eAAe,YAAY,GAAG,CAAC;IACrC,IAAI,cAAc;QACjB,OAAO,IAAA,6JAAiB,EAAC;IAC1B;IAEA,OAAO;AACR;AAMO,MAAM,iBAAiB,IAAA,8MAAK,EAAC;IACnC,MAAM,UAAU,MAAM,IAAA,0KAAI;IAC1B,IAAI,CAAC,SAAS,MAAM,IAAI;QACvB,OAAO;IACR;IAEA,iEAAiE;IACjE,MAAM,cAAc,MAAM,6IAAE,CAAC,WAAW,CAAC,SAAS,CAAC;QAClD,OAAO;YAAE,QAAQ,QAAQ,IAAI,CAAC,EAAE;QAAC;QACjC,SAAS;YAAE,QAAQ;QAAK;QACxB,SAAS;YAAE,WAAW;QAAM;IAC7B;IAEA,OAAO,aAAa,UAAU;AAC/B;AAKO,eAAe;IACrB,MAAM,SAAS,MAAM;IACrB,IAAI,CAAC,QAAQ;QACZ,MAAM,IAAI,MAAM;IACjB;IACA,OAAO;AACR;AAMO,eAAe;IACrB,kDAAkD;IAClD,MAAM,mBAAmB,MAAM;IAC/B,IAAI,kBAAkB;QACrB,OAAO;IACR;IAEA,uDAAuD;IACvD,MAAM,cAAc,MAAM;IAC1B,IAAI,aAAa;QAChB,OAAO;IACR;IAEA,MAAM,IAAI,MAAM;AACjB;AAKO,eAAe;IACrB,MAAM,SAAS,MAAM;IACrB,OAAO,WAAW;AACnB;;;IAlCsB;IAYA;IAmBA;;;;AA/BA,+OAAA;AAYA,+OAAA;AAmBA,+OAAA"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/abandoned-carts.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/server/auth\";\nimport { db } from \"@/server/db\";\nimport { requireAdminTenant } from \"@/server/tenant\";\n\nasync function requireStoreAccess() {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\tthrow new Error(\"Unauthorized\");\n\t}\n\n\tconst tenant = await requireAdminTenant();\n\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: {\n\t\t\tuserId: session.user.id,\n\t\t\ttenantId: tenant.id,\n\t\t},\n\t});\n\n\tif (!staffRecord) {\n\t\tthrow new Error(\"Forbidden: No access to this store\");\n\t}\n\n\treturn {\n\t\tuserId: session.user.id,\n\t\ttenantId: tenant.id,\n\t\trole: staffRecord.role,\n\t};\n}\n\nexport async function getAbandonedCarts() {\n\tconst { tenantId } = await requireStoreAccess();\n\n\t// A cart is considered abandoned if:\n\t// 1. It has items\n\t// 2. It was last updated more than 1 hour ago\n\t// 3. It hasn't been converted to an order\n\tconst oneHourAgo = new Date(Date.now() - 60 * 60 * 1000);\n\n\tconst carts = await db.cart.findMany({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tupdatedAt: {\n\t\t\t\tlt: oneHourAgo,\n\t\t\t},\n\t\t\titems: {\n\t\t\t\tsome: {},\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\tcustomer: true,\n\t\t\titems: {\n\t\t\t\tinclude: {\n\t\t\t\t\tproduct: {\n\t\t\t\t\t\tinclude: {\n\t\t\t\t\t\t\ttranslations: {\n\t\t\t\t\t\t\t\ttake: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tselectedVariant: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\torderBy: { updatedAt: \"desc\" },\n\t});\n\n\treturn carts.map((cart) => ({\n\t\tid: cart.id,\n\t\tcustomer: cart.customer\n\t\t\t? {\n\t\t\t\t\tid: cart.customer.id,\n\t\t\t\t\temail: cart.customer.email,\n\t\t\t\t\tname:\n\t\t\t\t\t\t`${cart.customer.firstName ?? \"\"} ${cart.customer.lastName ?? \"\"}`.trim() ||\n\t\t\t\t\t\t\"Unknown\",\n\t\t\t\t}\n\t\t\t: null,\n\t\tsessionId: cart.sessionId,\n\t\titemCount: cart.items.reduce((sum, item) => sum + item.quantity, 0),\n\t\ttotalValue: cart.items.reduce((sum, item) => {\n\t\t\tconst price = item.selectedVariant?.price ?? item.product.price;\n\t\t\treturn sum + Number(price) * item.quantity;\n\t\t}, 0),\n\t\titems: cart.items.map((item) => ({\n\t\t\tid: item.id,\n\t\t\tproductId: item.productId,\n\t\t\tproductName: item.product.translations[0]?.name ?? item.product.slug,\n\t\t\tvariantSku: item.selectedVariant?.sku,\n\t\t\tquantity: item.quantity,\n\t\t\tprice: Number(item.selectedVariant?.price ?? item.product.price),\n\t\t})),\n\t\tabandonedAt: cart.updatedAt,\n\t\tcreatedAt: cart.createdAt,\n\t}));\n}\n\nexport async function getAbandonedCart(id: string) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst cart = await db.cart.findFirst({\n\t\twhere: { id, tenantId },\n\t\tinclude: {\n\t\t\tcustomer: true,\n\t\t\titems: {\n\t\t\t\tinclude: {\n\t\t\t\t\tproduct: {\n\t\t\t\t\t\tinclude: {\n\t\t\t\t\t\t\ttranslations: {\n\t\t\t\t\t\t\t\ttake: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmedia: {\n\t\t\t\t\t\t\t\torderBy: { order: \"asc\" },\n\t\t\t\t\t\t\t\ttake: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tselectedVariant: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\tif (!cart) {\n\t\tthrow new Error(\"Cart not found\");\n\t}\n\n\treturn {\n\t\tid: cart.id,\n\t\tcustomer: cart.customer\n\t\t\t? {\n\t\t\t\t\tid: cart.customer.id,\n\t\t\t\t\temail: cart.customer.email,\n\t\t\t\t\tname:\n\t\t\t\t\t\t`${cart.customer.firstName ?? \"\"} ${cart.customer.lastName ?? \"\"}`.trim() ||\n\t\t\t\t\t\t\"Unknown\",\n\t\t\t\t\tphone: cart.customer.phone,\n\t\t\t\t}\n\t\t\t: null,\n\t\tsessionId: cart.sessionId,\n\t\titems: cart.items.map((item) => ({\n\t\t\tid: item.id,\n\t\t\tproductId: item.productId,\n\t\t\tproductName: item.product.translations[0]?.name ?? item.product.slug,\n\t\t\tproductImage: item.product.media[0]?.url,\n\t\t\tvariantSku: item.selectedVariant?.sku,\n\t\t\tvariantOptions: item.selectedVariant\n\t\t\t\t? Object.entries(item.selectedVariant.options as Record<string, string>)\n\t\t\t\t\t\t.map(([key, value]) => `${key}: ${value}`)\n\t\t\t\t\t\t.join(\", \")\n\t\t\t\t: null,\n\t\t\tquantity: item.quantity,\n\t\t\tprice: Number(item.selectedVariant?.price ?? item.product.price),\n\t\t})),\n\t\ttotalValue: cart.items.reduce((sum, item) => {\n\t\t\tconst price = item.selectedVariant?.price ?? item.product.price;\n\t\t\treturn sum + Number(price) * item.quantity;\n\t\t}, 0),\n\t\tabandonedAt: cart.updatedAt,\n\t\tcreatedAt: cart.createdAt,\n\t};\n}\n\nexport async function deleteAbandonedCart(id: string) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\t// Verify cart belongs to tenant\n\tconst cart = await db.cart.findFirst({\n\t\twhere: { id, tenantId },\n\t});\n\n\tif (!cart) {\n\t\tthrow new Error(\"Cart not found or access denied\");\n\t}\n\n\tawait db.cart.delete({\n\t\twhere: { id },\n\t});\n\n\treturn { success: true };\n}\n\nexport async function getAbandonedCartStats() {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst oneHourAgo = new Date(Date.now() - 60 * 60 * 1000);\n\tconst oneDayAgo = new Date(Date.now() - 24 * 60 * 60 * 1000);\n\tconst oneWeekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n\n\t// Get all abandoned carts\n\tconst abandonedCarts = await db.cart.findMany({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tupdatedAt: {\n\t\t\t\tlt: oneHourAgo,\n\t\t\t},\n\t\t\titems: {\n\t\t\t\tsome: {},\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\titems: {\n\t\t\t\tinclude: {\n\t\t\t\t\tproduct: true,\n\t\t\t\t\tselectedVariant: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\t// Calculate stats\n\tconst totalCarts = abandonedCarts.length;\n\tconst totalValue = abandonedCarts.reduce((sum, cart) => {\n\t\treturn (\n\t\t\tsum +\n\t\t\tcart.items.reduce((itemSum, item) => {\n\t\t\t\tconst price = item.selectedVariant?.price ?? item.product.price;\n\t\t\t\treturn itemSum + Number(price) * item.quantity;\n\t\t\t}, 0)\n\t\t);\n\t}, 0);\n\n\tconst last24Hours = abandonedCarts.filter(\n\t\t(cart) => cart.updatedAt >= oneDayAgo,\n\t).length;\n\tconst lastWeek = abandonedCarts.filter(\n\t\t(cart) => cart.updatedAt >= oneWeekAgo,\n\t).length;\n\n\treturn {\n\t\ttotalCarts,\n\t\ttotalValue,\n\t\tlast24Hours,\n\t\tlastWeek,\n\t\taverageValue: totalCarts > 0 ? totalValue / totalCarts : 0,\n\t};\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 481, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/.next-internal/server/app/%28internal%29/admin/orders/abandoned-checkouts/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getUserStores as '003bfcd7ac293af20dc22123ec44e81263e2c95347'} from 'ACTIONS_MODULE0'\nexport {userHasStore as '00b865bde8853c0b2200356e8a44aabbfda99ded8f'} from 'ACTIONS_MODULE0'\nexport {getCurrentTenant as '00f61908051b9076d3d4981917b5b0f4b9a64a3f03'} from 'ACTIONS_MODULE0'\nexport {createStore as '40177cd97a285945b21e6d3751ddbdc14238608821'} from 'ACTIONS_MODULE0'\nexport {checkSlugAvailability as '40ece7c8b327f75aed046925634f22b2bd96f4eb54'} from 'ACTIONS_MODULE0'\nexport {getCurrentTenant as '00f61908051b9076d3d4981917b5b0f4b9a64a3f03'} from 'ACTIONS_MODULE0'\nexport {deleteAbandonedCart as '402e4db47585a79d13ca193e0710c5a391edd8674a'} from 'ACTIONS_MODULE1'\nexport {getAbandonedCartStats as '00e344ca32fba57f962a282726ba061f619e3fc212'} from 'ACTIONS_MODULE1'\nexport {getAbandonedCarts as '008383a3cfd5f573c97614ab7d3862746c82a5dd8c'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAMA"}}]
}