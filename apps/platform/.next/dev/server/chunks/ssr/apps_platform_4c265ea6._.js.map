{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/lib/tenant.ts"],"sourcesContent":["import { db } from \"@/server/db\";\nimport type { Tenant } from \"@boostcart/database\";\n\n// Cache for tenant lookups\nconst tenantCache = new Map<string, { tenant: Tenant; expiry: number }>();\nconst CACHE_TTL = 60 * 1000; // 1 minute\n\n/**\n * Get tenant by subdomain (slug)\n */\nexport async function getTenantBySlug(slug: string): Promise<Tenant | null> {\n\t// Check cache first\n\tconst cached = tenantCache.get(`slug:${slug}`);\n\tif (cached && cached.expiry > Date.now()) {\n\t\treturn cached.tenant;\n\t}\n\n\tconst tenant = await db.tenant.findFirst({\n\t\twhere: {\n\t\t\tslug,\n\t\t\tisActive: true,\n\t\t\tdeletedAt: null,\n\t\t},\n\t});\n\n\tif (tenant) {\n\t\ttenantCache.set(`slug:${slug}`, {\n\t\t\ttenant,\n\t\t\texpiry: Date.now() + CACHE_TTL,\n\t\t});\n\t}\n\n\treturn tenant;\n}\n\n/**\n * Get tenant by custom domain\n */\nexport async function getTenantByDomain(domain: string): Promise<Tenant | null> {\n\t// Check cache first\n\tconst cached = tenantCache.get(`domain:${domain}`);\n\tif (cached && cached.expiry > Date.now()) {\n\t\treturn cached.tenant;\n\t}\n\n\tconst tenantDomain = await db.tenantDomain.findFirst({\n\t\twhere: {\n\t\t\tdomain,\n\t\t\tdnsVerified: true,\n\t\t},\n\t\tinclude: {\n\t\t\ttenant: true,\n\t\t},\n\t});\n\n\tif (tenantDomain?.tenant && tenantDomain.tenant.isActive) {\n\t\ttenantCache.set(`domain:${domain}`, {\n\t\t\ttenant: tenantDomain.tenant,\n\t\t\texpiry: Date.now() + CACHE_TTL,\n\t\t});\n\t\treturn tenantDomain.tenant;\n\t}\n\n\treturn null;\n}\n\n/**\n * Extract tenant from request hostname\n */\nexport async function getTenantFromRequest(\n\thostname: string | null\n): Promise<Tenant | null> {\n\tif (!hostname) return null;\n\n\t// Remove port if present\n\tconst host = hostname.split(\":\")[0];\n\tif (!host) return null;\n\n\t// Check if it's the main platform domain\n\tconst platformDomains = [\"boostcart.bg\", \"localhost\", \"127.0.0.1\"];\n\tconst isMainDomain = platformDomains.some(\n\t\t(d) => host === d || host === `www.${d}`\n\t);\n\n\tif (isMainDomain) {\n\t\t// No tenant for main domain\n\t\treturn null;\n\t}\n\n\t// Check for subdomain (e.g., store.boostcart.bg)\n\tconst subdomainMatch = host.match(/^([a-z0-9-]+)\\.boostcart\\.bg$/i);\n\tif (subdomainMatch?.[1]) {\n\t\tconst slug = subdomainMatch[1];\n\t\t// Skip common subdomains\n\t\tif ([\"www\", \"api\", \"admin\", \"staging\", \"dev\"].includes(slug)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn getTenantBySlug(slug);\n\t}\n\n\t// Check for local dev subdomain (e.g., store.localhost)\n\tconst localSubdomainMatch = host.match(/^([a-z0-9-]+)\\.localhost$/i);\n\tif (localSubdomainMatch?.[1]) {\n\t\treturn getTenantBySlug(localSubdomainMatch[1]);\n\t}\n\n\t// Otherwise, check if it's a custom domain\n\treturn getTenantByDomain(host);\n}\n\n/**\n * Clear tenant cache (useful after updates)\n */\nexport function clearTenantCache(identifier?: string) {\n\tif (identifier) {\n\t\ttenantCache.delete(`slug:${identifier}`);\n\t\ttenantCache.delete(`domain:${identifier}`);\n\t} else {\n\t\ttenantCache.clear();\n\t}\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;;;AAGA,2BAA2B;AAC3B,MAAM,cAAc,IAAI;AACxB,MAAM,YAAY,KAAK,MAAM,WAAW;AAKjC,eAAe,gBAAgB,IAAY;IACjD,oBAAoB;IACpB,MAAM,SAAS,YAAY,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM;IAC7C,IAAI,UAAU,OAAO,MAAM,GAAG,KAAK,GAAG,IAAI;QACzC,OAAO,OAAO,MAAM;IACrB;IAEA,MAAM,SAAS,MAAM,6IAAE,CAAC,MAAM,CAAC,SAAS,CAAC;QACxC,OAAO;YACN;YACA,UAAU;YACV,WAAW;QACZ;IACD;IAEA,IAAI,QAAQ;QACX,YAAY,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE;YAC/B;YACA,QAAQ,KAAK,GAAG,KAAK;QACtB;IACD;IAEA,OAAO;AACR;AAKO,eAAe,kBAAkB,MAAc;IACrD,oBAAoB;IACpB,MAAM,SAAS,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ;IACjD,IAAI,UAAU,OAAO,MAAM,GAAG,KAAK,GAAG,IAAI;QACzC,OAAO,OAAO,MAAM;IACrB;IAEA,MAAM,eAAe,MAAM,6IAAE,CAAC,YAAY,CAAC,SAAS,CAAC;QACpD,OAAO;YACN;YACA,aAAa;QACd;QACA,SAAS;YACR,QAAQ;QACT;IACD;IAEA,IAAI,cAAc,UAAU,aAAa,MAAM,CAAC,QAAQ,EAAE;QACzD,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ,EAAE;YACnC,QAAQ,aAAa,MAAM;YAC3B,QAAQ,KAAK,GAAG,KAAK;QACtB;QACA,OAAO,aAAa,MAAM;IAC3B;IAEA,OAAO;AACR;AAKO,eAAe,qBACrB,QAAuB;IAEvB,IAAI,CAAC,UAAU,OAAO;IAEtB,yBAAyB;IACzB,MAAM,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;IACnC,IAAI,CAAC,MAAM,OAAO;IAElB,yCAAyC;IACzC,MAAM,kBAAkB;QAAC;QAAgB;QAAa;KAAY;IAClE,MAAM,eAAe,gBAAgB,IAAI,CACxC,CAAC,IAAM,SAAS,KAAK,SAAS,CAAC,IAAI,EAAE,GAAG;IAGzC,IAAI,cAAc;QACjB,4BAA4B;QAC5B,OAAO;IACR;IAEA,iDAAiD;IACjD,MAAM,iBAAiB,KAAK,KAAK,CAAC;IAClC,IAAI,gBAAgB,CAAC,EAAE,EAAE;QACxB,MAAM,OAAO,cAAc,CAAC,EAAE;QAC9B,yBAAyB;QACzB,IAAI;YAAC;YAAO;YAAO;YAAS;YAAW;SAAM,CAAC,QAAQ,CAAC,OAAO;YAC7D,OAAO;QACR;QACA,OAAO,gBAAgB;IACxB;IAEA,wDAAwD;IACxD,MAAM,sBAAsB,KAAK,KAAK,CAAC;IACvC,IAAI,qBAAqB,CAAC,EAAE,EAAE;QAC7B,OAAO,gBAAgB,mBAAmB,CAAC,EAAE;IAC9C;IAEA,2CAA2C;IAC3C,OAAO,kBAAkB;AAC1B;AAKO,SAAS,iBAAiB,UAAmB;IACnD,IAAI,YAAY;QACf,YAAY,MAAM,CAAC,CAAC,KAAK,EAAE,YAAY;QACvC,YAAY,MAAM,CAAC,CAAC,OAAO,EAAE,YAAY;IAC1C,OAAO;QACN,YAAY,KAAK;IAClB;AACD"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/tenant.ts"],"sourcesContent":["\"use server\";\n\nimport { headers } from \"next/headers\";\nimport { cache } from \"react\";\nimport { getTenantByDomain, getTenantBySlug } from \"@/lib/tenant\";\nimport type { Tenant } from \"@boostcart/database\";\nimport { auth } from \"./auth\";\nimport { db } from \"./db\";\n\n/**\n * Get the current tenant from the request context (storefront)\n * This is cached per-request using React's cache()\n */\nexport const getCurrentTenant = cache(async (): Promise<Tenant | null> => {\n\tconst headersList = await headers();\n\n\t// Check for tenant slug from subdomain\n\tconst tenantSlug = headersList.get(\"x-tenant-slug\");\n\tif (tenantSlug) {\n\t\treturn getTenantBySlug(tenantSlug);\n\t}\n\n\t// Check for custom domain\n\tconst customDomain = headersList.get(\"x-custom-domain\");\n\tif (customDomain) {\n\t\treturn getTenantByDomain(customDomain);\n\t}\n\n\treturn null;\n});\n\n/**\n * Get the current tenant for admin context (from user's store ownership)\n * This is used when accessing via boostcart.bg/admin (not subdomain)\n */\nexport const getAdminTenant = cache(async (): Promise<Tenant | null> => {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\treturn null;\n\t}\n\n\t// Get the user's primary store (first store they have access to)\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: { userId: session.user.id },\n\t\tinclude: { tenant: true },\n\t\torderBy: { createdAt: \"asc\" },\n\t});\n\n\treturn staffRecord?.tenant ?? null;\n});\n\n/**\n * Require tenant to be present (storefront context), throws if not found\n */\nexport async function requireTenant(): Promise<Tenant> {\n\tconst tenant = await getCurrentTenant();\n\tif (!tenant) {\n\t\tthrow new Error(\"Tenant not found\");\n\t}\n\treturn tenant;\n}\n\n/**\n * Require tenant for admin operations\n * First checks storefront context, then falls back to user's store\n */\nexport async function requireAdminTenant(): Promise<Tenant> {\n\t// First try storefront context (subdomain access)\n\tconst storefrontTenant = await getCurrentTenant();\n\tif (storefrontTenant) {\n\t\treturn storefrontTenant;\n\t}\n\n\t// Fall back to user's store (main domain admin access)\n\tconst adminTenant = await getAdminTenant();\n\tif (adminTenant) {\n\t\treturn adminTenant;\n\t}\n\n\tthrow new Error(\"No tenant context found. Please create or select a store.\");\n}\n\n/**\n * Check if we're in a tenant context\n */\nexport async function hasTenantContext(): Promise<boolean> {\n\tconst tenant = await getCurrentTenant();\n\treturn tenant !== null;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AACA;;;;;;;;;;;;;;AAMO,MAAM,mBAAmB,IAAA,8MAAK,EAAC;IACrC,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,uCAAuC;IACvC,MAAM,aAAa,YAAY,GAAG,CAAC;IACnC,IAAI,YAAY;QACf,OAAO,IAAA,2JAAe,EAAC;IACxB;IAEA,0BAA0B;IAC1B,MAAM,eAAe,YAAY,GAAG,CAAC;IACrC,IAAI,cAAc;QACjB,OAAO,IAAA,6JAAiB,EAAC;IAC1B;IAEA,OAAO;AACR;AAMO,MAAM,iBAAiB,IAAA,8MAAK,EAAC;IACnC,MAAM,UAAU,MAAM,IAAA,0KAAI;IAC1B,IAAI,CAAC,SAAS,MAAM,IAAI;QACvB,OAAO;IACR;IAEA,iEAAiE;IACjE,MAAM,cAAc,MAAM,6IAAE,CAAC,WAAW,CAAC,SAAS,CAAC;QAClD,OAAO;YAAE,QAAQ,QAAQ,IAAI,CAAC,EAAE;QAAC;QACjC,SAAS;YAAE,QAAQ;QAAK;QACxB,SAAS;YAAE,WAAW;QAAM;IAC7B;IAEA,OAAO,aAAa,UAAU;AAC/B;AAKO,eAAe;IACrB,MAAM,SAAS,MAAM;IACrB,IAAI,CAAC,QAAQ;QACZ,MAAM,IAAI,MAAM;IACjB;IACA,OAAO;AACR;AAMO,eAAe;IACrB,kDAAkD;IAClD,MAAM,mBAAmB,MAAM;IAC/B,IAAI,kBAAkB;QACrB,OAAO;IACR;IAEA,uDAAuD;IACvD,MAAM,cAAc,MAAM;IAC1B,IAAI,aAAa;QAChB,OAAO;IACR;IAEA,MAAM,IAAI,MAAM;AACjB;AAKO,eAAe;IACrB,MAAM,SAAS,MAAM;IACrB,OAAO,WAAW;AACnB;;;IAlCsB;IAYA;IAmBA;;;;AA/BA,+OAAA;AAYA,+OAAA;AAmBA,+OAAA"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/blog.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/server/auth\";\nimport { db } from \"@/server/db\";\nimport { requireAdminTenant } from \"@/server/tenant\";\n\nasync function requireStoreAccess() {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\tthrow new Error(\"Unauthorized\");\n\t}\n\n\tconst tenant = await requireAdminTenant();\n\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: {\n\t\t\tuserId: session.user.id,\n\t\t\ttenantId: tenant.id,\n\t\t},\n\t});\n\n\tif (!staffRecord) {\n\t\tthrow new Error(\"Forbidden: No access to this store\");\n\t}\n\n\treturn {\n\t\tuserId: session.user.id,\n\t\ttenantId: tenant.id,\n\t\trole: staffRecord.role,\n\t};\n}\n\nexport async function getBlogPosts() {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst posts = await db.blogPost.findMany({\n\t\twhere: { tenantId },\n\t\tinclude: {\n\t\t\ttranslations: {\n\t\t\t\tinclude: {\n\t\t\t\t\tlocale: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\torderBy: { createdAt: \"desc\" },\n\t});\n\n\treturn posts.map((post) => ({\n\t\tid: post.id,\n\t\tslug: post.slug,\n\t\tfeaturedImage: post.featuredImage,\n\t\tauthor: post.author,\n\t\tisPublished: post.isPublished,\n\t\tpublishedAt: post.publishedAt,\n\t\ttitle: post.translations[0]?.title ?? post.slug,\n\t\texcerpt: post.translations[0]?.excerpt ?? \"\",\n\t\tcontent: post.translations[0]?.content ?? \"\",\n\t\ttranslations: post.translations.map((t) => ({\n\t\t\tlocaleId: t.localeId,\n\t\t\tlocaleCode: t.locale.code,\n\t\t\tlocaleName: t.locale.name,\n\t\t\ttitle: t.title,\n\t\t\texcerpt: t.excerpt,\n\t\t\tcontent: t.content,\n\t\t})),\n\t\tcreatedAt: post.createdAt,\n\t\tupdatedAt: post.updatedAt,\n\t}));\n}\n\nexport async function getBlogPost(id: string) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst post = await db.blogPost.findFirst({\n\t\twhere: { id, tenantId },\n\t\tinclude: {\n\t\t\ttranslations: {\n\t\t\t\tinclude: {\n\t\t\t\t\tlocale: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\tif (!post) {\n\t\tthrow new Error(\"Blog post not found\");\n\t}\n\n\treturn {\n\t\tid: post.id,\n\t\tslug: post.slug,\n\t\tfeaturedImage: post.featuredImage,\n\t\tauthor: post.author,\n\t\tisPublished: post.isPublished,\n\t\tpublishedAt: post.publishedAt,\n\t\ttranslations: post.translations.map((t) => ({\n\t\t\tid: t.id,\n\t\t\tlocaleId: t.localeId,\n\t\t\tlocaleCode: t.locale.code,\n\t\t\tlocaleName: t.locale.name,\n\t\t\ttitle: t.title,\n\t\t\texcerpt: t.excerpt,\n\t\t\tcontent: t.content,\n\t\t})),\n\t\tcreatedAt: post.createdAt,\n\t\tupdatedAt: post.updatedAt,\n\t};\n}\n\nexport interface CreateBlogPostInput {\n\tslug: string;\n\tfeaturedImage?: string;\n\tauthor?: string;\n\tisPublished?: boolean;\n\tpublishedAt?: Date;\n\ttranslations: {\n\t\tlocaleId: string;\n\t\ttitle: string;\n\t\texcerpt?: string;\n\t\tcontent: string;\n\t}[];\n}\n\nexport async function createBlogPost(input: CreateBlogPostInput) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\t// Check for duplicate slug\n\tconst existing = await db.blogPost.findUnique({\n\t\twhere: {\n\t\t\ttenantId_slug: {\n\t\t\t\ttenantId,\n\t\t\t\tslug: input.slug,\n\t\t\t},\n\t\t},\n\t});\n\n\tif (existing) {\n\t\tthrow new Error(\"A blog post with this slug already exists\");\n\t}\n\n\tconst post = await db.blogPost.create({\n\t\tdata: {\n\t\t\tslug: input.slug,\n\t\t\tfeaturedImage: input.featuredImage,\n\t\t\tauthor: input.author,\n\t\t\tisPublished: input.isPublished ?? false,\n\t\t\tpublishedAt: input.isPublished ? (input.publishedAt ?? new Date()) : null,\n\t\t\ttenantId,\n\t\t\ttranslations: {\n\t\t\t\tcreate: input.translations.map((t) => ({\n\t\t\t\t\tlocaleId: t.localeId,\n\t\t\t\t\ttitle: t.title,\n\t\t\t\t\texcerpt: t.excerpt,\n\t\t\t\t\tcontent: t.content,\n\t\t\t\t})),\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\ttranslations: true,\n\t\t},\n\t});\n\n\treturn post;\n}\n\nexport interface UpdateBlogPostInput {\n\tslug?: string;\n\tfeaturedImage?: string | null;\n\tauthor?: string;\n\tisPublished?: boolean;\n\tpublishedAt?: Date | null;\n\ttranslations?: {\n\t\tlocaleId: string;\n\t\ttitle: string;\n\t\texcerpt?: string;\n\t\tcontent: string;\n\t}[];\n}\n\nexport async function updateBlogPost(id: string, input: UpdateBlogPostInput) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst post = await db.blogPost.findFirst({\n\t\twhere: { id, tenantId },\n\t});\n\n\tif (!post) {\n\t\tthrow new Error(\"Blog post not found or access denied\");\n\t}\n\n\t// Check for duplicate slug if changing\n\tif (input.slug && input.slug !== post.slug) {\n\t\tconst existing = await db.blogPost.findUnique({\n\t\t\twhere: {\n\t\t\t\ttenantId_slug: {\n\t\t\t\t\ttenantId,\n\t\t\t\t\tslug: input.slug,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tif (existing) {\n\t\t\tthrow new Error(\"A blog post with this slug already exists\");\n\t\t}\n\t}\n\n\t// Handle publish state change\n\tlet publishedAt = input.publishedAt;\n\tif (input.isPublished !== undefined) {\n\t\tif (input.isPublished && !post.isPublished) {\n\t\t\t// Publishing for the first time\n\t\t\tpublishedAt = publishedAt ?? new Date();\n\t\t} else if (!input.isPublished) {\n\t\t\t// Unpublishing\n\t\t\tpublishedAt = null;\n\t\t}\n\t}\n\n\tconst updated = await db.blogPost.update({\n\t\twhere: { id },\n\t\tdata: {\n\t\t\tslug: input.slug,\n\t\t\tfeaturedImage: input.featuredImage,\n\t\t\tauthor: input.author,\n\t\t\tisPublished: input.isPublished,\n\t\t\tpublishedAt,\n\t\t\t...(input.translations && {\n\t\t\t\ttranslations: {\n\t\t\t\t\tdeleteMany: {},\n\t\t\t\t\tcreate: input.translations.map((t) => ({\n\t\t\t\t\t\tlocaleId: t.localeId,\n\t\t\t\t\t\ttitle: t.title,\n\t\t\t\t\t\texcerpt: t.excerpt,\n\t\t\t\t\t\tcontent: t.content,\n\t\t\t\t\t})),\n\t\t\t\t},\n\t\t\t}),\n\t\t},\n\t\tinclude: {\n\t\t\ttranslations: true,\n\t\t},\n\t});\n\n\treturn updated;\n}\n\nexport async function deleteBlogPost(id: string) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst post = await db.blogPost.findFirst({\n\t\twhere: { id, tenantId },\n\t});\n\n\tif (!post) {\n\t\tthrow new Error(\"Blog post not found or access denied\");\n\t}\n\n\tawait db.blogPost.delete({\n\t\twhere: { id },\n\t});\n\n\treturn { success: true };\n}\n\nexport async function toggleBlogPostPublished(id: string) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst post = await db.blogPost.findFirst({\n\t\twhere: { id, tenantId },\n\t});\n\n\tif (!post) {\n\t\tthrow new Error(\"Blog post not found or access denied\");\n\t}\n\n\tconst isPublished = !post.isPublished;\n\tconst publishedAt = isPublished\n\t\t? post.publishedAt ?? new Date()\n\t\t: post.publishedAt;\n\n\tconst updated = await db.blogPost.update({\n\t\twhere: { id },\n\t\tdata: {\n\t\t\tisPublished,\n\t\t\tpublishedAt,\n\t\t},\n\t});\n\n\treturn updated;\n}\n\nexport async function getBlogStats() {\n\tconst { tenantId } = await requireStoreAccess();\n\n\tconst [total, published, drafts] = await Promise.all([\n\t\tdb.blogPost.count({ where: { tenantId } }),\n\t\tdb.blogPost.count({ where: { tenantId, isPublished: true } }),\n\t\tdb.blogPost.count({ where: { tenantId, isPublished: false } }),\n\t]);\n\n\t// Get recent posts (last 7 days)\n\tconst weekAgo = new Date();\n\tweekAgo.setDate(weekAgo.getDate() - 7);\n\n\tconst recent = await db.blogPost.count({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: { gte: weekAgo },\n\t\t},\n\t});\n\n\treturn {\n\t\ttotal,\n\t\tpublished,\n\t\tdrafts,\n\t\trecent,\n\t};\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/locales.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/server/auth\";\nimport { db } from \"@/server/db\";\nimport { requireAdminTenant } from \"@/server/tenant\";\n\nasync function requireStoreAccess() {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\tthrow new Error(\"Unauthorized\");\n\t}\n\n\tconst tenant = await requireAdminTenant();\n\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: {\n\t\t\tuserId: session.user.id,\n\t\t\ttenantId: tenant.id,\n\t\t},\n\t});\n\n\tif (!staffRecord) {\n\t\tthrow new Error(\"Forbidden: No access to this store\");\n\t}\n\n\treturn {\n\t\tuserId: session.user.id,\n\t\ttenantId: tenant.id,\n\t\trole: staffRecord.role,\n\t};\n}\n\n/**\n * Get or create a default locale for the platform.\n * This ensures there's always a valid locale available for translations.\n */\nexport async function getOrCreateDefaultLocale() {\n\t// First try to get the default locale\n\tlet defaultLocale = await db.locale.findFirst({\n\t\twhere: { isDefault: true },\n\t});\n\n\tif (!defaultLocale) {\n\t\t// Try to get any existing locale\n\t\tdefaultLocale = await db.locale.findFirst();\n\t}\n\n\tif (!defaultLocale) {\n\t\t// Create a default Bulgarian locale since this is a Bulgarian-focused platform\n\t\tdefaultLocale = await db.locale.create({\n\t\t\tdata: {\n\t\t\t\tcode: \"bg-BG\",\n\t\t\t\tname: \"Български\",\n\t\t\t\tisDefault: true,\n\t\t\t},\n\t\t});\n\t}\n\n\treturn {\n\t\tid: defaultLocale.id,\n\t\tcode: defaultLocale.code,\n\t\tname: defaultLocale.name,\n\t\tisDefault: defaultLocale.isDefault,\n\t};\n}\n\nexport async function getLocales() {\n\tawait requireStoreAccess();\n\n\tconst locales = await db.locale.findMany({\n\t\torderBy: [{ isDefault: \"desc\" }, { name: \"asc\" }],\n\t});\n\n\treturn locales.map((locale) => ({\n\t\tid: locale.id,\n\t\tcode: locale.code,\n\t\tname: locale.name,\n\t\tisDefault: locale.isDefault,\n\t}));\n}\n\nexport async function getLocale(id: string) {\n\tawait requireStoreAccess();\n\n\tconst locale = await db.locale.findUnique({\n\t\twhere: { id },\n\t});\n\n\tif (!locale) {\n\t\tthrow new Error(\"Locale not found\");\n\t}\n\n\treturn {\n\t\tid: locale.id,\n\t\tcode: locale.code,\n\t\tname: locale.name,\n\t\tisDefault: locale.isDefault,\n\t};\n}\n\nexport interface CreateLocaleInput {\n\tcode: string;\n\tname: string;\n\tisDefault?: boolean;\n}\n\nexport async function createLocale(input: CreateLocaleInput) {\n\tawait requireStoreAccess();\n\n\t// Check for duplicate code\n\tconst existing = await db.locale.findUnique({\n\t\twhere: { code: input.code },\n\t});\n\n\tif (existing) {\n\t\tthrow new Error(\"A locale with this code already exists\");\n\t}\n\n\t// If setting as default, unset other defaults\n\tif (input.isDefault) {\n\t\tawait db.locale.updateMany({\n\t\t\twhere: { isDefault: true },\n\t\t\tdata: { isDefault: false },\n\t\t});\n\t}\n\n\tconst locale = await db.locale.create({\n\t\tdata: {\n\t\t\tcode: input.code,\n\t\t\tname: input.name,\n\t\t\tisDefault: input.isDefault ?? false,\n\t\t},\n\t});\n\n\treturn locale;\n}\n\nexport interface UpdateLocaleInput {\n\tcode?: string;\n\tname?: string;\n\tisDefault?: boolean;\n}\n\nexport async function updateLocale(id: string, input: UpdateLocaleInput) {\n\tawait requireStoreAccess();\n\n\tconst locale = await db.locale.findUnique({\n\t\twhere: { id },\n\t});\n\n\tif (!locale) {\n\t\tthrow new Error(\"Locale not found\");\n\t}\n\n\t// Check for duplicate code if changing\n\tif (input.code && input.code !== locale.code) {\n\t\tconst existing = await db.locale.findUnique({\n\t\t\twhere: { code: input.code },\n\t\t});\n\n\t\tif (existing) {\n\t\t\tthrow new Error(\"A locale with this code already exists\");\n\t\t}\n\t}\n\n\t// If setting as default, unset other defaults\n\tif (input.isDefault && !locale.isDefault) {\n\t\tawait db.locale.updateMany({\n\t\t\twhere: { isDefault: true },\n\t\t\tdata: { isDefault: false },\n\t\t});\n\t}\n\n\tconst updated = await db.locale.update({\n\t\twhere: { id },\n\t\tdata: {\n\t\t\tcode: input.code,\n\t\t\tname: input.name,\n\t\t\tisDefault: input.isDefault,\n\t\t},\n\t});\n\n\treturn updated;\n}\n\nexport async function deleteLocale(id: string) {\n\tawait requireStoreAccess();\n\n\tconst locale = await db.locale.findUnique({\n\t\twhere: { id },\n\t});\n\n\tif (!locale) {\n\t\tthrow new Error(\"Locale not found\");\n\t}\n\n\tif (locale.isDefault) {\n\t\tthrow new Error(\"Cannot delete the default locale\");\n\t}\n\n\t// Check if locale is used in any translations\n\tconst usageCount = await Promise.all([\n\t\tdb.productTranslation.count({ where: { localeId: id } }),\n\t\tdb.categoryTranslation.count({ where: { localeId: id } }),\n\t\tdb.brandTranslation.count({ where: { localeId: id } }),\n\t\tdb.pageTranslation.count({ where: { localeId: id } }),\n\t\tdb.collectionTranslation.count({ where: { localeId: id } }),\n\t\tdb.blogPostTranslation.count({ where: { localeId: id } }),\n\t]);\n\n\tconst totalUsage = usageCount.reduce((sum, count) => sum + count, 0);\n\n\tif (totalUsage > 0) {\n\t\tthrow new Error(\n\t\t\t`Cannot delete locale: it is used in ${totalUsage} translation(s)`\n\t\t);\n\t}\n\n\tawait db.locale.delete({\n\t\twhere: { id },\n\t});\n\n\treturn { success: true };\n}\n\nexport async function setDefaultLocale(id: string) {\n\tawait requireStoreAccess();\n\n\tconst locale = await db.locale.findUnique({\n\t\twhere: { id },\n\t});\n\n\tif (!locale) {\n\t\tthrow new Error(\"Locale not found\");\n\t}\n\n\t// Unset current default\n\tawait db.locale.updateMany({\n\t\twhere: { isDefault: true },\n\t\tdata: { isDefault: false },\n\t});\n\n\t// Set new default\n\tconst updated = await db.locale.update({\n\t\twhere: { id },\n\t\tdata: { isDefault: true },\n\t});\n\n\treturn updated;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 874, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/.next-internal/server/app/%28internal%29/admin/content/blog/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getUserStores as '003bfcd7ac293af20dc22123ec44e81263e2c95347'} from 'ACTIONS_MODULE0'\nexport {userHasStore as '00b865bde8853c0b2200356e8a44aabbfda99ded8f'} from 'ACTIONS_MODULE0'\nexport {getCurrentTenant as '00f61908051b9076d3d4981917b5b0f4b9a64a3f03'} from 'ACTIONS_MODULE0'\nexport {createStore as '40177cd97a285945b21e6d3751ddbdc14238608821'} from 'ACTIONS_MODULE0'\nexport {checkSlugAvailability as '40ece7c8b327f75aed046925634f22b2bd96f4eb54'} from 'ACTIONS_MODULE0'\nexport {getCurrentTenant as '00f61908051b9076d3d4981917b5b0f4b9a64a3f03'} from 'ACTIONS_MODULE0'\nexport {deleteBlogPost as '40d81df54c74dd0f77bc6811c424f98f0caf2d80d1'} from 'ACTIONS_MODULE1'\nexport {getBlogPosts as '00de3f01b91a9ac6d513de5942c011266961dc79c4'} from 'ACTIONS_MODULE1'\nexport {getBlogStats as '008f8492eda7112a375805aa48685413214aeab93d'} from 'ACTIONS_MODULE1'\nexport {toggleBlogPostPublished as '40d7322993d5c124ec007959f402c333effe14ccca'} from 'ACTIONS_MODULE1'\nexport {updateBlogPost as '60b1fd248f327bbc25a389733e8187a4947cca4f56'} from 'ACTIONS_MODULE1'\nexport {getOrCreateDefaultLocale as '00c21a4fde5fc4d7ea8af9814bb55639d4f312633e'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AAMA;AAKA"}}]
}