{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/lib/tenant.ts"],"sourcesContent":["import type { Tenant } from \"@boostcart/database\";\nimport { db } from \"@/server/db\";\n\n// Cache for tenant lookups\nconst tenantCache = new Map<string, { tenant: Tenant; expiry: number }>();\nconst CACHE_TTL = 60 * 1000; // 1 minute\n\n/**\n * Get tenant by subdomain (slug)\n */\nexport async function getTenantBySlug(slug: string): Promise<Tenant | null> {\n\t// Check cache first\n\tconst cached = tenantCache.get(`slug:${slug}`);\n\tif (cached && cached.expiry > Date.now()) {\n\t\treturn cached.tenant;\n\t}\n\n\tconst tenant = await db.tenant.findFirst({\n\t\twhere: {\n\t\t\tslug,\n\t\t\tisActive: true,\n\t\t\tdeletedAt: null,\n\t\t},\n\t});\n\n\tif (tenant) {\n\t\ttenantCache.set(`slug:${slug}`, {\n\t\t\ttenant,\n\t\t\texpiry: Date.now() + CACHE_TTL,\n\t\t});\n\t}\n\n\treturn tenant;\n}\n\n/**\n * Get tenant by custom domain\n */\nexport async function getTenantByDomain(\n\tdomain: string,\n): Promise<Tenant | null> {\n\t// Check cache first\n\tconst cached = tenantCache.get(`domain:${domain}`);\n\tif (cached && cached.expiry > Date.now()) {\n\t\treturn cached.tenant;\n\t}\n\n\tconst tenantDomain = await db.tenantDomain.findFirst({\n\t\twhere: {\n\t\t\tdomain,\n\t\t\tdnsVerified: true,\n\t\t},\n\t\tinclude: {\n\t\t\ttenant: true,\n\t\t},\n\t});\n\n\tif (tenantDomain?.tenant && tenantDomain.tenant.isActive) {\n\t\ttenantCache.set(`domain:${domain}`, {\n\t\t\ttenant: tenantDomain.tenant,\n\t\t\texpiry: Date.now() + CACHE_TTL,\n\t\t});\n\t\treturn tenantDomain.tenant;\n\t}\n\n\treturn null;\n}\n\n/**\n * Extract tenant from request hostname\n */\nexport async function getTenantFromRequest(\n\thostname: string | null,\n): Promise<Tenant | null> {\n\tif (!hostname) return null;\n\n\t// Remove port if present\n\tconst host = hostname.split(\":\")[0];\n\tif (!host) return null;\n\n\t// Check if it's the main platform domain\n\tconst platformDomains = [\"boostcart.bg\", \"localhost\", \"127.0.0.1\"];\n\tconst isMainDomain = platformDomains.some(\n\t\t(d) => host === d || host === `www.${d}`,\n\t);\n\n\tif (isMainDomain) {\n\t\t// No tenant for main domain\n\t\treturn null;\n\t}\n\n\t// Check for subdomain (e.g., store.boostcart.bg)\n\tconst subdomainMatch = host.match(/^([a-z0-9-]+)\\.boostcart\\.bg$/i);\n\tif (subdomainMatch?.[1]) {\n\t\tconst slug = subdomainMatch[1];\n\t\t// Skip common subdomains\n\t\tif ([\"www\", \"api\", \"admin\", \"staging\", \"dev\"].includes(slug)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn getTenantBySlug(slug);\n\t}\n\n\t// Check for local dev subdomain (e.g., store.localhost)\n\tconst localSubdomainMatch = host.match(/^([a-z0-9-]+)\\.localhost$/i);\n\tif (localSubdomainMatch?.[1]) {\n\t\treturn getTenantBySlug(localSubdomainMatch[1]);\n\t}\n\n\t// Otherwise, check if it's a custom domain\n\treturn getTenantByDomain(host);\n}\n\n/**\n * Clear tenant cache (useful after updates)\n */\nexport function clearTenantCache(identifier?: string) {\n\tif (identifier) {\n\t\ttenantCache.delete(`slug:${identifier}`);\n\t\ttenantCache.delete(`domain:${identifier}`);\n\t} else {\n\t\ttenantCache.clear();\n\t}\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;;;;;;AAEA,2BAA2B;AAC3B,MAAM,cAAc,IAAI;AACxB,MAAM,YAAY,KAAK,MAAM,WAAW;AAKjC,eAAe,gBAAgB,IAAY;IACjD,oBAAoB;IACpB,MAAM,SAAS,YAAY,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM;IAC7C,IAAI,UAAU,OAAO,MAAM,GAAG,KAAK,GAAG,IAAI;QACzC,OAAO,OAAO,MAAM;IACrB;IAEA,MAAM,SAAS,MAAM,6IAAE,CAAC,MAAM,CAAC,SAAS,CAAC;QACxC,OAAO;YACN;YACA,UAAU;YACV,WAAW;QACZ;IACD;IAEA,IAAI,QAAQ;QACX,YAAY,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE;YAC/B;YACA,QAAQ,KAAK,GAAG,KAAK;QACtB;IACD;IAEA,OAAO;AACR;AAKO,eAAe,kBACrB,MAAc;IAEd,oBAAoB;IACpB,MAAM,SAAS,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ;IACjD,IAAI,UAAU,OAAO,MAAM,GAAG,KAAK,GAAG,IAAI;QACzC,OAAO,OAAO,MAAM;IACrB;IAEA,MAAM,eAAe,MAAM,6IAAE,CAAC,YAAY,CAAC,SAAS,CAAC;QACpD,OAAO;YACN;YACA,aAAa;QACd;QACA,SAAS;YACR,QAAQ;QACT;IACD;IAEA,IAAI,cAAc,UAAU,aAAa,MAAM,CAAC,QAAQ,EAAE;QACzD,YAAY,GAAG,CAAC,CAAC,OAAO,EAAE,QAAQ,EAAE;YACnC,QAAQ,aAAa,MAAM;YAC3B,QAAQ,KAAK,GAAG,KAAK;QACtB;QACA,OAAO,aAAa,MAAM;IAC3B;IAEA,OAAO;AACR;AAKO,eAAe,qBACrB,QAAuB;IAEvB,IAAI,CAAC,UAAU,OAAO;IAEtB,yBAAyB;IACzB,MAAM,OAAO,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE;IACnC,IAAI,CAAC,MAAM,OAAO;IAElB,yCAAyC;IACzC,MAAM,kBAAkB;QAAC;QAAgB;QAAa;KAAY;IAClE,MAAM,eAAe,gBAAgB,IAAI,CACxC,CAAC,IAAM,SAAS,KAAK,SAAS,CAAC,IAAI,EAAE,GAAG;IAGzC,IAAI,cAAc;QACjB,4BAA4B;QAC5B,OAAO;IACR;IAEA,iDAAiD;IACjD,MAAM,iBAAiB,KAAK,KAAK,CAAC;IAClC,IAAI,gBAAgB,CAAC,EAAE,EAAE;QACxB,MAAM,OAAO,cAAc,CAAC,EAAE;QAC9B,yBAAyB;QACzB,IAAI;YAAC;YAAO;YAAO;YAAS;YAAW;SAAM,CAAC,QAAQ,CAAC,OAAO;YAC7D,OAAO;QACR;QACA,OAAO,gBAAgB;IACxB;IAEA,wDAAwD;IACxD,MAAM,sBAAsB,KAAK,KAAK,CAAC;IACvC,IAAI,qBAAqB,CAAC,EAAE,EAAE;QAC7B,OAAO,gBAAgB,mBAAmB,CAAC,EAAE;IAC9C;IAEA,2CAA2C;IAC3C,OAAO,kBAAkB;AAC1B;AAKO,SAAS,iBAAiB,UAAmB;IACnD,IAAI,YAAY;QACf,YAAY,MAAM,CAAC,CAAC,KAAK,EAAE,YAAY;QACvC,YAAY,MAAM,CAAC,CAAC,OAAO,EAAE,YAAY;IAC1C,OAAO;QACN,YAAY,KAAK;IAClB;AACD"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/tenant.ts"],"sourcesContent":["\"use server\";\n\nimport type { Tenant } from \"@boostcart/database\";\nimport { headers } from \"next/headers\";\nimport { cache } from \"react\";\nimport { getTenantByDomain, getTenantBySlug } from \"@/lib/tenant\";\nimport { auth } from \"./auth\";\nimport { db } from \"./db\";\n\n/**\n * Get the current tenant from the request context (storefront)\n * This is cached per-request using React's cache()\n */\nexport const getCurrentTenant = cache(async (): Promise<Tenant | null> => {\n\tconst headersList = await headers();\n\n\t// Check for tenant slug from subdomain\n\tconst tenantSlug = headersList.get(\"x-tenant-slug\");\n\tif (tenantSlug) {\n\t\treturn getTenantBySlug(tenantSlug);\n\t}\n\n\t// Check for custom domain\n\tconst customDomain = headersList.get(\"x-custom-domain\");\n\tif (customDomain) {\n\t\treturn getTenantByDomain(customDomain);\n\t}\n\n\treturn null;\n});\n\n/**\n * Get the current tenant for admin context (from user's store ownership)\n * This is used when accessing via boostcart.bg/admin (not subdomain)\n */\nexport const getAdminTenant = cache(async (): Promise<Tenant | null> => {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\treturn null;\n\t}\n\n\t// Get the user's primary store (first store they have access to)\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: { userId: session.user.id },\n\t\tinclude: { tenant: true },\n\t\torderBy: { createdAt: \"asc\" },\n\t});\n\n\treturn staffRecord?.tenant ?? null;\n});\n\n/**\n * Require tenant to be present (storefront context), throws if not found\n */\nexport async function requireTenant(): Promise<Tenant> {\n\tconst tenant = await getCurrentTenant();\n\tif (!tenant) {\n\t\tthrow new Error(\"Tenant not found\");\n\t}\n\treturn tenant;\n}\n\n/**\n * Require tenant for admin operations\n * First checks storefront context, then falls back to user's store\n */\nexport async function requireAdminTenant(): Promise<Tenant> {\n\t// First try storefront context (subdomain access)\n\tconst storefrontTenant = await getCurrentTenant();\n\tif (storefrontTenant) {\n\t\treturn storefrontTenant;\n\t}\n\n\t// Fall back to user's store (main domain admin access)\n\tconst adminTenant = await getAdminTenant();\n\tif (adminTenant) {\n\t\treturn adminTenant;\n\t}\n\n\tthrow new Error(\"No tenant context found. Please create or select a store.\");\n}\n\n/**\n * Check if we're in a tenant context\n */\nexport async function hasTenantContext(): Promise<boolean> {\n\tconst tenant = await getCurrentTenant();\n\treturn tenant !== null;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAMO,MAAM,mBAAmB,IAAA,8MAAK,EAAC;IACrC,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,uCAAuC;IACvC,MAAM,aAAa,YAAY,GAAG,CAAC;IACnC,IAAI,YAAY;QACf,OAAO,IAAA,2JAAe,EAAC;IACxB;IAEA,0BAA0B;IAC1B,MAAM,eAAe,YAAY,GAAG,CAAC;IACrC,IAAI,cAAc;QACjB,OAAO,IAAA,6JAAiB,EAAC;IAC1B;IAEA,OAAO;AACR;AAMO,MAAM,iBAAiB,IAAA,8MAAK,EAAC;IACnC,MAAM,UAAU,MAAM,IAAA,0KAAI;IAC1B,IAAI,CAAC,SAAS,MAAM,IAAI;QACvB,OAAO;IACR;IAEA,iEAAiE;IACjE,MAAM,cAAc,MAAM,6IAAE,CAAC,WAAW,CAAC,SAAS,CAAC;QAClD,OAAO;YAAE,QAAQ,QAAQ,IAAI,CAAC,EAAE;QAAC;QACjC,SAAS;YAAE,QAAQ;QAAK;QACxB,SAAS;YAAE,WAAW;QAAM;IAC7B;IAEA,OAAO,aAAa,UAAU;AAC/B;AAKO,eAAe;IACrB,MAAM,SAAS,MAAM;IACrB,IAAI,CAAC,QAAQ;QACZ,MAAM,IAAI,MAAM;IACjB;IACA,OAAO;AACR;AAMO,eAAe;IACrB,kDAAkD;IAClD,MAAM,mBAAmB,MAAM;IAC/B,IAAI,kBAAkB;QACrB,OAAO;IACR;IAEA,uDAAuD;IACvD,MAAM,cAAc,MAAM;IAC1B,IAAI,aAAa;QAChB,OAAO;IACR;IAEA,MAAM,IAAI,MAAM;AACjB;AAKO,eAAe;IACrB,MAAM,SAAS,MAAM;IACrB,OAAO,WAAW;AACnB;;;IAlCsB;IAYA;IAmBA;;;;AA/BA,+OAAA;AAYA,+OAAA;AAmBA,+OAAA"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/analytics.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/server/auth\";\nimport { db } from \"@/server/db\";\nimport { requireAdminTenant } from \"@/server/tenant\";\n\nasync function requireStoreAccess() {\n\tconst session = await auth();\n\tif (!session?.user?.id) {\n\t\tthrow new Error(\"Unauthorized\");\n\t}\n\n\tconst tenant = await requireAdminTenant();\n\n\tconst staffRecord = await db.tenantStaff.findFirst({\n\t\twhere: {\n\t\t\tuserId: session.user.id,\n\t\t\ttenantId: tenant.id,\n\t\t},\n\t});\n\n\tif (!staffRecord) {\n\t\tthrow new Error(\"Forbidden: No access to this store\");\n\t}\n\n\treturn {\n\t\tuserId: session.user.id,\n\t\ttenantId: tenant.id,\n\t\trole: staffRecord.role,\n\t};\n}\n\n// Get date range for analytics\nfunction getDateRange(period: string): { startDate: Date; endDate: Date } {\n\tconst endDate = new Date();\n\tconst startDate = new Date();\n\n\tswitch (period) {\n\t\tcase \"7days\":\n\t\t\tstartDate.setDate(endDate.getDate() - 7);\n\t\t\tbreak;\n\t\tcase \"30days\":\n\t\t\tstartDate.setDate(endDate.getDate() - 30);\n\t\t\tbreak;\n\t\tcase \"90days\":\n\t\t\tstartDate.setDate(endDate.getDate() - 90);\n\t\t\tbreak;\n\t\tcase \"year\":\n\t\t\tstartDate.setFullYear(endDate.getFullYear() - 1);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tstartDate.setDate(endDate.getDate() - 30);\n\t}\n\n\treturn { startDate, endDate };\n}\n\n// Get overview stats\nexport async function getAnalyticsOverview(period = \"30days\") {\n\tconst { tenantId } = await requireStoreAccess();\n\tconst { startDate, endDate } = getDateRange(period);\n\n\t// Get previous period for comparison\n\tconst periodLength = endDate.getTime() - startDate.getTime();\n\tconst previousStartDate = new Date(startDate.getTime() - periodLength);\n\tconst previousEndDate = startDate;\n\n\t// Current period orders\n\tconst currentOrders = await db.order.findMany({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: startDate,\n\t\t\t\tlte: endDate,\n\t\t\t},\n\t\t},\n\t\tselect: {\n\t\t\tid: true,\n\t\t\ttotalAmount: true,\n\t\t\tstatus: true,\n\t\t},\n\t});\n\n\t// Previous period orders\n\tconst previousOrders = await db.order.findMany({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: previousStartDate,\n\t\t\t\tlte: previousEndDate,\n\t\t\t},\n\t\t},\n\t\tselect: {\n\t\t\tid: true,\n\t\t\ttotalAmount: true,\n\t\t},\n\t});\n\n\t// Current period customers\n\tconst currentCustomers = await db.customer.count({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: startDate,\n\t\t\t\tlte: endDate,\n\t\t\t},\n\t\t},\n\t});\n\n\t// Previous period customers\n\tconst previousCustomers = await db.customer.count({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: previousStartDate,\n\t\t\t\tlte: previousEndDate,\n\t\t\t},\n\t\t},\n\t});\n\n\t// Current period products\n\tconst currentProducts = await db.product.count({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: startDate,\n\t\t\t\tlte: endDate,\n\t\t\t},\n\t\t},\n\t});\n\n\t// Total products\n\tconst totalProducts = await db.product.count({\n\t\twhere: { tenantId },\n\t});\n\n\t// Get products sold in current period\n\tconst currentOrderItems = await db.orderItem.findMany({\n\t\twhere: {\n\t\t\torder: {\n\t\t\t\ttenantId,\n\t\t\t\tcreatedAt: {\n\t\t\t\t\tgte: startDate,\n\t\t\t\t\tlte: endDate,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tselect: {\n\t\t\tquantity: true,\n\t\t},\n\t});\n\n\t// Get products sold in previous period\n\tconst previousOrderItems = await db.orderItem.findMany({\n\t\twhere: {\n\t\t\torder: {\n\t\t\t\ttenantId,\n\t\t\t\tcreatedAt: {\n\t\t\t\t\tgte: previousStartDate,\n\t\t\t\t\tlte: previousEndDate,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tselect: {\n\t\t\tquantity: true,\n\t\t},\n\t});\n\n\tconst currentProductsSold = currentOrderItems.reduce(\n\t\t(sum, item) => sum + item.quantity,\n\t\t0,\n\t);\n\tconst previousProductsSold = previousOrderItems.reduce(\n\t\t(sum, item) => sum + item.quantity,\n\t\t0,\n\t);\n\n\tconst productsSoldGrowth =\n\t\tpreviousProductsSold > 0\n\t\t\t? ((currentProductsSold - previousProductsSold) / previousProductsSold) *\n\t\t\t\t100\n\t\t\t: 0;\n\n\t// Calculate metrics\n\tconst currentRevenue = currentOrders.reduce(\n\t\t(sum, order) => sum + Number(order.totalAmount),\n\t\t0,\n\t);\n\tconst previousRevenue = previousOrders.reduce(\n\t\t(sum, order) => sum + Number(order.totalAmount),\n\t\t0,\n\t);\n\n\tconst revenueGrowth =\n\t\tpreviousRevenue > 0\n\t\t\t? ((currentRevenue - previousRevenue) / previousRevenue) * 100\n\t\t\t: 0;\n\n\tconst ordersGrowth =\n\t\tpreviousOrders.length > 0\n\t\t\t? ((currentOrders.length - previousOrders.length) /\n\t\t\t\t\tpreviousOrders.length) *\n\t\t\t\t100\n\t\t\t: 0;\n\n\tconst customersGrowth =\n\t\tpreviousCustomers > 0\n\t\t\t? ((currentCustomers - previousCustomers) / previousCustomers) * 100\n\t\t\t: 0;\n\n\tconst currentAverageOrderValue =\n\t\tcurrentOrders.length > 0 ? currentRevenue / currentOrders.length : 0;\n\n\tconst previousAverageOrderValue =\n\t\tpreviousOrders.length > 0 ? previousRevenue / previousOrders.length : 0;\n\n\tconst averageOrderValueGrowth =\n\t\tpreviousAverageOrderValue > 0\n\t\t\t? ((currentAverageOrderValue - previousAverageOrderValue) /\n\t\t\t\t\tpreviousAverageOrderValue) *\n\t\t\t\t100\n\t\t\t: 0;\n\n\treturn {\n\t\trevenue: {\n\t\t\ttotal: currentRevenue,\n\t\t\tprevious: previousRevenue,\n\t\t\tgrowth: Math.round(revenueGrowth * 10) / 10,\n\t\t},\n\t\torders: {\n\t\t\ttotal: currentOrders.length,\n\t\t\tprevious: previousOrders.length,\n\t\t\tgrowth: Math.round(ordersGrowth * 10) / 10,\n\t\t},\n\t\tcustomers: {\n\t\t\ttotal: currentCustomers,\n\t\t\tprevious: previousCustomers,\n\t\t\tgrowth: Math.round(customersGrowth * 10) / 10,\n\t\t},\n\t\tproducts: {\n\t\t\ttotal: totalProducts,\n\t\t\tnew: currentProducts,\n\t\t},\n\t\tproductsSold: {\n\t\t\ttotal: currentProductsSold,\n\t\t\tprevious: previousProductsSold,\n\t\t\tgrowth: Math.round(productsSoldGrowth * 10) / 10,\n\t\t},\n\t\taverageOrderValue: {\n\t\t\ttotal: Math.round(currentAverageOrderValue * 100) / 100,\n\t\t\tprevious: Math.round(previousAverageOrderValue * 100) / 100,\n\t\t\tgrowth: Math.round(averageOrderValueGrowth * 10) / 10,\n\t\t},\n\t};\n}\n\n// Get top products by revenue\nexport async function getTopProducts(period = \"30days\", limit = 5) {\n\tconst { tenantId } = await requireStoreAccess();\n\tconst { startDate, endDate } = getDateRange(period);\n\n\t// Get order items with product info\n\tconst orderItems = await db.orderItem.findMany({\n\t\twhere: {\n\t\t\torder: {\n\t\t\t\ttenantId,\n\t\t\t\tcreatedAt: {\n\t\t\t\t\tgte: startDate,\n\t\t\t\t\tlte: endDate,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\tproduct: {\n\t\t\t\tselect: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tslug: true,\n\t\t\t\t\ttranslations: {\n\t\t\t\t\t\tselect: {\n\t\t\t\t\t\t\tname: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttake: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\t// Aggregate by product\n\tconst productStats = new Map<\n\t\tstring,\n\t\t{ name: string; revenue: number; sales: number }\n\t>();\n\n\tfor (const item of orderItems) {\n\t\tif (!item.product) continue;\n\n\t\tconst productId = item.product.id;\n\t\tconst productName = item.product.translations[0]?.name ?? item.product.slug;\n\t\tconst revenue = Number(item.price) * item.quantity;\n\n\t\tconst existing = productStats.get(productId);\n\t\tif (existing) {\n\t\t\texisting.revenue += revenue;\n\t\t\texisting.sales += item.quantity;\n\t\t} else {\n\t\t\tproductStats.set(productId, {\n\t\t\t\tname: productName,\n\t\t\t\trevenue,\n\t\t\t\tsales: item.quantity,\n\t\t\t});\n\t\t}\n\t}\n\n\t// Sort by revenue and take top N\n\tconst topProducts = Array.from(productStats.entries())\n\t\t.map(([id, stats]) => ({\n\t\t\tid,\n\t\t\t...stats,\n\t\t}))\n\t\t.sort((a, b) => b.revenue - a.revenue)\n\t\t.slice(0, limit);\n\n\treturn topProducts;\n}\n\n// Get top categories by revenue\nexport async function getTopCategories(period = \"30days\", limit = 5) {\n\tconst { tenantId } = await requireStoreAccess();\n\tconst { startDate, endDate } = getDateRange(period);\n\n\t// Get order items with product and category info\n\tconst orderItems = await db.orderItem.findMany({\n\t\twhere: {\n\t\t\torder: {\n\t\t\t\ttenantId,\n\t\t\t\tcreatedAt: {\n\t\t\t\t\tgte: startDate,\n\t\t\t\t\tlte: endDate,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tinclude: {\n\t\t\tproduct: {\n\t\t\t\tselect: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tcategoryId: true,\n\t\t\t\t\tcategory: {\n\t\t\t\t\t\tselect: {\n\t\t\t\t\t\t\tid: true,\n\t\t\t\t\t\t\tslug: true,\n\t\t\t\t\t\t\ttranslations: {\n\t\t\t\t\t\t\t\tselect: {\n\t\t\t\t\t\t\t\t\tname: true,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttake: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\t// Aggregate by category\n\tconst categoryStats = new Map<\n\t\tstring,\n\t\t{ name: string; revenue: number; orders: Set<string> }\n\t>();\n\n\tfor (const item of orderItems) {\n\t\tif (!item.product?.category) continue;\n\n\t\tconst categoryId = item.product.category.id;\n\t\tconst categoryName =\n\t\t\titem.product.category.translations[0]?.name ?? item.product.category.slug;\n\t\tconst revenue = Number(item.price) * item.quantity;\n\n\t\tconst existing = categoryStats.get(categoryId);\n\t\tif (existing) {\n\t\t\texisting.revenue += revenue;\n\t\t\texisting.orders.add(item.orderId);\n\t\t} else {\n\t\t\tcategoryStats.set(categoryId, {\n\t\t\t\tname: categoryName,\n\t\t\t\trevenue,\n\t\t\t\torders: new Set([item.orderId]),\n\t\t\t});\n\t\t}\n\t}\n\n\t// Calculate total revenue for percentage\n\tconst totalRevenue = Array.from(categoryStats.values()).reduce(\n\t\t(sum, stats) => sum + stats.revenue,\n\t\t0,\n\t);\n\n\t// Sort by revenue and take top N\n\tconst topCategories = Array.from(categoryStats.entries())\n\t\t.map(([id, stats]) => ({\n\t\t\tid,\n\t\t\tname: stats.name,\n\t\t\trevenue: stats.revenue,\n\t\t\torders: stats.orders.size,\n\t\t\tshare:\n\t\t\t\ttotalRevenue > 0 ? Math.round((stats.revenue / totalRevenue) * 100) : 0,\n\t\t}))\n\t\t.sort((a, b) => b.revenue - a.revenue)\n\t\t.slice(0, limit);\n\n\treturn topCategories;\n}\n\n// Get recent activity\nexport async function getRecentActivity(limit = 10) {\n\tconst { tenantId } = await requireStoreAccess();\n\n\t// Get recent orders\n\tconst recentOrders = await db.order.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: { createdAt: \"desc\" },\n\t\ttake: limit,\n\t\tselect: {\n\t\t\tid: true,\n\t\t\torderNumber: true,\n\t\t\ttotalAmount: true,\n\t\t\tstatus: true,\n\t\t\tcreatedAt: true,\n\t\t\tcustomer: {\n\t\t\t\tselect: {\n\t\t\t\t\tfirstName: true,\n\t\t\t\t\tlastName: true,\n\t\t\t\t\temail: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\t// Get recent customers\n\tconst recentCustomers = await db.customer.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: { createdAt: \"desc\" },\n\t\ttake: limit,\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tfirstName: true,\n\t\t\tlastName: true,\n\t\t\temail: true,\n\t\t\tcreatedAt: true,\n\t\t},\n\t});\n\n\t// Get recent reviews\n\tconst recentReviews = await db.review.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: { createdAt: \"desc\" },\n\t\ttake: limit,\n\t\tselect: {\n\t\t\tid: true,\n\t\t\trating: true,\n\t\t\tcreatedAt: true,\n\t\t\tproduct: {\n\t\t\t\tselect: {\n\t\t\t\t\tslug: true,\n\t\t\t\t\ttranslations: {\n\t\t\t\t\t\tselect: {\n\t\t\t\t\t\t\tname: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttake: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\n\t// Combine and sort by date\n\ttype Activity = {\n\t\tid: string;\n\t\ttype: \"order\" | \"customer\" | \"review\";\n\t\taction: string;\n\t\tdetails: string;\n\t\ttimestamp: Date;\n\t};\n\n\tconst activities: Activity[] = [];\n\n\tfor (const order of recentOrders) {\n\t\tconst customerName = order.customer\n\t\t\t? `${order.customer.firstName ?? \"\"} ${order.customer.lastName ?? \"\"}`.trim() ||\n\t\t\t\torder.customer.email\n\t\t\t: \"Guest\";\n\n\t\tactivities.push({\n\t\t\tid: `order-${order.id}`,\n\t\t\ttype: \"order\",\n\t\t\taction:\n\t\t\t\torder.status === \"PENDING\"\n\t\t\t\t\t? \"New order\"\n\t\t\t\t\t: `Order ${order.status.toLowerCase()}`,\n\t\t\tdetails: `#${order.orderNumber} - ${customerName} - $${Number(order.totalAmount).toFixed(2)}`,\n\t\t\ttimestamp: order.createdAt,\n\t\t});\n\t}\n\n\tfor (const customer of recentCustomers) {\n\t\tconst customerName =\n\t\t\t`${customer.firstName ?? \"\"} ${customer.lastName ?? \"\"}`.trim() ||\n\t\t\tcustomer.email;\n\n\t\tactivities.push({\n\t\t\tid: `customer-${customer.id}`,\n\t\t\ttype: \"customer\",\n\t\t\taction: \"New customer\",\n\t\t\tdetails: `${customerName} registered`,\n\t\t\ttimestamp: customer.createdAt,\n\t\t});\n\t}\n\n\tfor (const review of recentReviews) {\n\t\tconst productName =\n\t\t\treview.product.translations[0]?.name ?? review.product.slug;\n\n\t\tactivities.push({\n\t\t\tid: `review-${review.id}`,\n\t\t\ttype: \"review\",\n\t\t\taction: \"Review posted\",\n\t\t\tdetails: `${review.rating} stars - ${productName}`,\n\t\t\ttimestamp: review.createdAt,\n\t\t});\n\t}\n\n\t// Sort by timestamp and take top N\n\tactivities.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\n\n\treturn activities.slice(0, limit).map((activity) => ({\n\t\t...activity,\n\t\ttime: getRelativeTime(activity.timestamp),\n\t}));\n}\n\n// Helper function to get relative time\nfunction getRelativeTime(date: Date): string {\n\tconst now = new Date();\n\tconst diffMs = now.getTime() - date.getTime();\n\tconst diffMins = Math.floor(diffMs / 60000);\n\tconst diffHours = Math.floor(diffMs / 3600000);\n\tconst diffDays = Math.floor(diffMs / 86400000);\n\n\tif (diffMins < 1) return \"Just now\";\n\tif (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? \"s\" : \"\"} ago`;\n\tif (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? \"s\" : \"\"} ago`;\n\tif (diffDays < 7) return `${diffDays} day${diffDays > 1 ? \"s\" : \"\"} ago`;\n\n\treturn date.toLocaleDateString();\n}\n\n// Get orders by status\nexport async function getOrdersByStatus(period = \"30days\") {\n\tconst { tenantId } = await requireStoreAccess();\n\tconst { startDate, endDate } = getDateRange(period);\n\n\tconst orders = await db.order.groupBy({\n\t\tby: [\"status\"],\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: startDate,\n\t\t\t\tlte: endDate,\n\t\t\t},\n\t\t},\n\t\t_count: {\n\t\t\tid: true,\n\t\t},\n\t});\n\n\treturn orders.map((o) => ({\n\t\tstatus: o.status,\n\t\tcount: o._count.id,\n\t}));\n}\n\n// Get revenue by day for chart\nexport async function getRevenueByDay(period = \"30days\") {\n\tconst { tenantId } = await requireStoreAccess();\n\tconst { startDate, endDate } = getDateRange(period);\n\n\tconst orders = await db.order.findMany({\n\t\twhere: {\n\t\t\ttenantId,\n\t\t\tcreatedAt: {\n\t\t\t\tgte: startDate,\n\t\t\t\tlte: endDate,\n\t\t\t},\n\t\t},\n\t\tselect: {\n\t\t\ttotalAmount: true,\n\t\t\tcreatedAt: true,\n\t\t},\n\t\torderBy: {\n\t\t\tcreatedAt: \"asc\",\n\t\t},\n\t});\n\n\t// Group by day\n\tconst dailyRevenue = new Map<string, number>();\n\n\tfor (const order of orders) {\n\t\tconst day = order.createdAt.toISOString().split(\"T\")[0];\n\t\tif (!day) continue;\n\t\tconst amount = Number(order.totalAmount);\n\n\t\tdailyRevenue.set(day, (dailyRevenue.get(day) ?? 0) + amount);\n\t}\n\n\treturn Array.from(dailyRevenue.entries()).map(([date, revenue]) => ({\n\t\tdate,\n\t\trevenue: Math.round(revenue * 100) / 100,\n\t}));\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 774, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/.next-internal/server/app/%28internal%29/admin/analytics/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getUserStores as '003bfcd7ac293af20dc22123ec44e81263e2c95347'} from 'ACTIONS_MODULE0'\nexport {userHasStore as '00b865bde8853c0b2200356e8a44aabbfda99ded8f'} from 'ACTIONS_MODULE0'\nexport {getCurrentTenant as '00f61908051b9076d3d4981917b5b0f4b9a64a3f03'} from 'ACTIONS_MODULE0'\nexport {createStore as '40177cd97a285945b21e6d3751ddbdc14238608821'} from 'ACTIONS_MODULE0'\nexport {checkSlugAvailability as '40ece7c8b327f75aed046925634f22b2bd96f4eb54'} from 'ACTIONS_MODULE0'\nexport {getCurrentTenant as '00f61908051b9076d3d4981917b5b0f4b9a64a3f03'} from 'ACTIONS_MODULE0'\nexport {getAnalyticsOverview as '402172bd330f6f5bda19541dd1c2a49fd8d588d62d'} from 'ACTIONS_MODULE1'\nexport {getRecentActivity as '402f731f5a490fbcf1f685f183c14ac0d0f9a3dcb5'} from 'ACTIONS_MODULE1'\nexport {getTopCategories as '603008f31faab29dde8cac93ce5016e9f4ba32508a'} from 'ACTIONS_MODULE1'\nexport {getTopProducts as '6064e5473817c2c6ffd582ff13e099eceeeeecfe1d'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAMA"}}]
}