{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/components/loader.tsx"],"sourcesContent":["\"use client\";\n\nimport { LoaderIcon } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface LoaderProps {\n\tclassName?: string;\n\tsize?: \"sm\" | \"md\" | \"lg\";\n}\n\nexport function Loader({ className, size = \"md\" }: LoaderProps) {\n\tconst sizeClasses = {\n\t\tsm: \"size-4\",\n\t\tmd: \"size-6\",\n\t\tlg: \"size-8\",\n\t};\n\n\treturn (\n\t\t<LoaderIcon\n\t\t\tclassName={cn(\n\t\t\t\t\"text-muted-foreground animate-spin\",\n\t\t\t\tsizeClasses[size],\n\t\t\t\tclassName\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nexport default Loader;\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,OAAO,EAAE,SAAS,EAAE,OAAO,IAAI,EAAe;IAC7D,MAAM,cAAc;QACnB,IAAI;QACJ,IAAI;QACJ,IAAI;IACL;IAEA,qBACC,6LAAC,2NAAU;QACV,WAAW,IAAA,gJAAE,EACZ,sCACA,WAAW,CAAC,KAAK,EACjB;;;;;;AAIJ;KAhBgB;uCAkBD"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/components/admin/polaris-button.tsx"],"sourcesContent":["import type React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface PolarisButtonProps\n\textends React.ButtonHTMLAttributes<HTMLButtonElement> {\n\tchildren: React.ReactNode;\n\tsize?: \"micro\" | \"slim\" | \"medium\" | \"large\";\n\tfullWidth?: boolean;\n\tloading?: boolean;\n\tdisabled?: boolean;\n\ticon?: React.ReactNode;\n}\n\nexport function PolarisButton({\n\tchildren,\n\tsize = \"slim\",\n\tfullWidth = false,\n\tloading = false,\n\tdisabled = false,\n\ticon,\n\tclassName,\n\t...props\n}: PolarisButtonProps) {\n\tconst sizeClasses = {\n\t\tmicro: \"h-7 px-2.5 text-xs\",\n\t\tslim: \"h-9 px-3 text-sm\",\n\t\tmedium: \"h-10 px-4 text-sm\",\n\t\tlarge: \"h-12 px-5 text-base\",\n\t};\n\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tdisabled={disabled || loading}\n\t\t\tclassName={cn(\n\t\t\t\t// Base styles matching Polaris primary button\n\t\t\t\t\"relative inline-flex items-center justify-center gap-2\",\n\t\t\t\t\"font-semibold rounded-[10px] cursor-pointer\",\n\t\t\t\t\"transition-all duration-200 ease-out\",\n\t\t\t\t\"outline-none focus-visible:outline-2 focus-visible:outline-offset-2\",\n\n\t\t\t\t\"border-0\",\n\t\t\t\t\"shadow-[inset_0_1.5px_0_0_rgba(0,0,0,0.6),inset_1.5px_0_0_0_rgba(0,0,0,0.8),inset_-1.5px_0_0_0_rgba(0,0,0,0.8),inset_0_-3px_0_0_rgba(0,0,0,0.8)]\",\n\n\t\t\t\t\"bg-linear-to-b from-[#4a4a4a] to-[#303030]\",\n\n\t\t\t\t// Text colors from Polaris tokens\n\t\t\t\t\"text-white\",\n\n\t\t\t\t\"hover:before:absolute hover:before:inset-0 hover:before:rounded-[10px] hover:before:bg-black hover:before:opacity-30 hover:before:transition-opacity hover:before:duration-200 hover:before:content-['']\",\n\n\t\t\t\t// Disabled state\n\t\t\t\t\"disabled:bg-linear-to-b disabled:from-[rgba(0,0,0,0.2)] disabled:to-[rgba(0,0,0,0.17)]\",\n\t\t\t\t\"disabled:text-[rgba(255,255,255,0.6)]\",\n\t\t\t\t\"disabled:cursor-not-allowed\",\n\t\t\t\t\"disabled:shadow-[inset_0_1.5px_0_0_rgba(0,0,0,0.2),inset_1.5px_0_0_0_rgba(0,0,0,0.2),inset_-1.5px_0_0_0_rgba(0,0,0,0.2),inset_0_-3px_0_0_rgba(0,0,0,0.2)]\",\n\t\t\t\t\"disabled:hover:before:opacity-0\",\n\n\t\t\t\t// Focus state border\n\t\t\t\t\"focus-visible:outline-[#005BD3]\",\n\n\t\t\t\t\"active:shadow-[inset_0_4px_0_0_rgba(0,0,0,0.8),inset_1.5px_0_0_0_rgba(0,0,0,0.8),inset_-1.5px_0_0_0_rgba(0,0,0,0.8),inset_0_-3px_0_0_rgba(0,0,0,0.8)]\",\n\t\t\t\t\"active:bg-linear-to-b active:from-[#2a2a2a] active:to-[#1a1a1a]\",\n\t\t\t\t\"active:[&>span:last-child]:translate-y-px\",\n\n\t\t\t\t// Size variants\n\t\t\t\tsizeClasses[size],\n\n\t\t\t\t// Full width\n\t\t\t\tfullWidth && \"w-full\",\n\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<span className=\"absolute inset-0 rounded-[10px] pointer-events-none shadow-[inset_0_3px_0_0_rgba(255,255,255,0.2),inset_1.5px_0_0_0_rgba(255,255,255,0.1),inset_-1.5px_0_0_0_rgba(255,255,255,0.1)] active:opacity-0 transition-opacity duration-200\" />\n\n\t\t\t<span className=\"relative flex items-center justify-center gap-2 transition-transform duration-200\">\n\t\t\t\t{loading ? (\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclassName=\"animate-spin size-4\"\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<title>Loading</title>\n\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\tclassName=\"opacity-25\"\n\t\t\t\t\t\t\tcx=\"12\"\n\t\t\t\t\t\t\tcy=\"12\"\n\t\t\t\t\t\t\tr=\"10\"\n\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tclassName=\"opacity-75\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t) : (\n\t\t\t\t\ticon && <span className=\"shrink-0\">{icon}</span>\n\t\t\t\t)}\n\t\t\t\t{children}\n\t\t\t</span>\n\t\t</button>\n\t);\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAYO,SAAS,cAAc,EAC7B,QAAQ,EACR,OAAO,MAAM,EACb,YAAY,KAAK,EACjB,UAAU,KAAK,EACf,WAAW,KAAK,EAChB,IAAI,EACJ,SAAS,EACT,GAAG,OACiB;IACpB,MAAM,cAAc;QACnB,OAAO;QACP,MAAM;QACN,QAAQ;QACR,OAAO;IACR;IAEA,qBACC,6LAAC;QACA,MAAK;QACL,UAAU,YAAY;QACtB,WAAW,IAAA,gJAAE,EACZ,8CAA8C;QAC9C,0DACA,+CACA,wCACA,uEAEA,YACA,oJAEA,8CAEA,kCAAkC;QAClC,cAEA,4MAEA,iBAAiB;QACjB,0FACA,yCACA,+BACA,6JACA,mCAEA,qBAAqB;QACrB,mCAEA,yJACA,mEACA,6CAEA,gBAAgB;QAChB,WAAW,CAAC,KAAK,EAEjB,aAAa;QACb,aAAa,UAEb;QAEA,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;;;;;;0BAEhB,6LAAC;gBAAK,WAAU;;oBACd,wBACA,6LAAC;wBACA,WAAU;wBACV,OAAM;wBACN,MAAK;wBACL,SAAQ;;0CAER,6LAAC;0CAAM;;;;;;0CACP,6LAAC;gCACA,WAAU;gCACV,IAAG;gCACH,IAAG;gCACH,GAAE;gCACF,QAAO;gCACP,aAAY;;;;;;0CAEb,6LAAC;gCACA,WAAU;gCACV,MAAK;gCACL,GAAE;;;;;;;;;;;+BAIJ,sBAAQ,6LAAC;wBAAK,WAAU;kCAAY;;;;;;oBAEpC;;;;;;;;;;;;;AAIL;KA9FgB"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n\t<div\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t\"rounded-lg border bg-card text-card-foreground shadow-sm\",\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n\t<div\n\t\tref={ref}\n\t\tclassName={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n\t\t{...props}\n\t/>\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n\t<div\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t\"text-2xl font-semibold leading-none tracking-tight\",\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n\t<div\n\t\tref={ref}\n\t\tclassName={cn(\"text-sm text-muted-foreground\", className)}\n\t\t{...props}\n\t/>\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n\t<div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<\n\tHTMLDivElement,\n\tReact.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n\t<div\n\t\tref={ref}\n\t\tclassName={cn(\"flex items-center p-6 pt-0\", className)}\n\t\t{...props}\n\t/>\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport {\n\tCard,\n\tCardHeader,\n\tCardFooter,\n\tCardTitle,\n\tCardDescription,\n\tCardContent,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3B,6LAAC;QACA,KAAK;QACL,WAAW,IAAA,gJAAE,EACZ,4DACA;QAEA,GAAG,KAAK;;;;;;;AAGX,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3B,6LAAC;QACA,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGX,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3B,6LAAC;QACA,KAAK;QACL,WAAW,IAAA,gJAAE,EACZ,sDACA;QAEA,GAAG,KAAK;;;;;;;AAGX,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3B,6LAAC;QACA,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGX,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,gJAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAE/D,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC3B,6LAAC;QACA,KAAK;QACL,WAAW,IAAA,gJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGX,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/components/ui/input.tsx"],"sourcesContent":["import { cva, type VariantProps } from \"class-variance-authority\";\nimport type * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\n// Define input size variants\nconst inputVariants = cva(\n\t`\n    flex w-full bg-background border border-input shadow-xs shadow-black/5 transition-[color,box-shadow] text-foreground placeholder:text-muted-foreground/80 \n    focus-visible:ring-ring/30  focus-visible:border-ring focus-visible:outline-none focus-visible:ring-[3px]     \n    disabled:cursor-not-allowed disabled:opacity-60 \n    [&[readonly]]:bg-muted/80 [&[readonly]]:cursor-not-allowed\n    file:h-full [&[type=file]]:py-0 file:border-solid file:border-input file:bg-transparent \n    file:font-medium file:not-italic file:text-foreground file:p-0 file:border-0 file:border-e\n    aria-invalid:border-destructive/60 aria-invalid:ring-destructive/10 dark:aria-invalid:border-destructive dark:aria-invalid:ring-destructive/20\n  `,\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tlg: \"h-10 px-4 text-sm rounded-md file:pe-4 file:me-4\",\n\t\t\t\tmd: \"h-8.5 px-3 text-[0.8125rem] leading-(--text-sm--line-height) rounded-md file:pe-3 file:me-3\",\n\t\t\t\tsm: \"h-7 px-2.5 text-xs rounded-md file:pe-2.5 file:me-2.5\",\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: \"md\",\n\t\t},\n\t},\n);\n\nconst inputAddonVariants = cva(\n\t\"flex items-center shrink-0 justify-center bg-muted border border-input shadow-xs shadow-[rgba(0,0,0,0.05)] text-secondary-foreground\",\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tsm: \"rounded-md h-7 min-w-7 text-xs px-2.5 [&_svg:not([class*=size-])]:size-3.5\",\n\t\t\t\tmd: \"rounded-md h-8.5 min-w-8.5 px-3 text-[0.8125rem] leading-(--text-sm--line-height) [&_svg:not([class*=size-])]:size-4.5\",\n\t\t\t\tlg: \"rounded-md h-10 min-w-10 px-4 text-sm [&_svg:not([class*=size-])]:size-4.5\",\n\t\t\t},\n\t\t\tmode: {\n\t\t\t\tdefault: \"\",\n\t\t\t\ticon: \"px-0 justify-center\",\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: \"md\",\n\t\t\tmode: \"default\",\n\t\t},\n\t},\n);\n\nconst inputGroupVariants = cva(\n\t`\n    flex items-stretch\n    [&_[data-slot=input]]:grow\n    [&_[data-slot=input-addon]:has(+[data-slot=input])]:rounded-e-none [&_[data-slot=input-addon]:has(+[data-slot=input])]:border-e-0\n    [&_[data-slot=input-addon]:has(+[data-slot=datefield])]:rounded-e-none [&_[data-slot=input-addon]:has(+[data-slot=datefield])]:border-e-0 \n    [&_[data-slot=input]+[data-slot=input-addon]]:rounded-s-none [&_[data-slot=input]+[data-slot=input-addon]]:border-s-0\n    [&_[data-slot=input-addon]:has(+[data-slot=button])]:rounded-e-none\n    [&_[data-slot=input]+[data-slot=button]]:rounded-s-none\n    [&_[data-slot=button]+[data-slot=input]]:rounded-s-none\n    [&_[data-slot=input-addon]+[data-slot=input]]:rounded-s-none\n    [&_[data-slot=input-addon]+[data-slot=datefield]]:[&_[data-slot=input]]:rounded-s-none\n    [&_[data-slot=datefield]:has(+[data-slot=input-addon])]:[&_[data-slot=input]]:rounded-e-none\n    [&_[data-slot=input]:has(+[data-slot=button])]:rounded-e-none\n    [&_[data-slot=input]:has(+[data-slot=input-addon])]:rounded-e-none\n    [&_[data-slot=datefield]]:grow\n    [&_[data-slot=datefield]+[data-slot=input-addon]]:rounded-s-none [&_[data-slot=datefield]+[data-slot=input-addon]]:border-s-0\n  `,\n\t{\n\t\tvariants: {},\n\t\tdefaultVariants: {},\n\t},\n);\n\nconst inputWrapperVariants = cva(\n\t`\n    flex items-center gap-1.5\n    has-[:focus-visible]:ring-ring/30 \n    has-[:focus-visible]:border-ring\n    has-[:focus-visible]:outline-none \n    has-[:focus-visible]:ring-[3px]\n\n    [&_[data-slot=datefield]]:grow \n    [&_[data-slot=input]]:data-focus-within:ring-transparent  \n    [&_[data-slot=input]]:data-focus-within:ring-0 \n    [&_[data-slot=input]]:data-focus-within:border-0 \n    [&_[data-slot=input]]:flex \n    [&_[data-slot=input]]:w-full \n    [&_[data-slot=input]]:outline-none \n    [&_[data-slot=input]]:transition-colors \n    [&_[data-slot=input]]:text-foreground\n    [&_[data-slot=input]]:placeholder:text-muted-foreground \n    [&_[data-slot=input]]:border-0 \n    [&_[data-slot=input]]:bg-transparent \n    [&_[data-slot=input]]:p-0\n    [&_[data-slot=input]]:shadow-none \n    [&_[data-slot=input]]:focus-visible:ring-0 \n    [&_[data-slot=input]]:h-auto \n    [&_[data-slot=input]]:disabled:cursor-not-allowed\n    [&_[data-slot=input]]:disabled:opacity-50    \n\n    has-[[aria-invalid=true]]:border-destructive/60 \n    has-[[aria-invalid=true]]:ring-destructive/10 \n    dark:has-[[aria-invalid=true]]:border-destructive \n    dark:has-[[aria-invalid=true]]:ring-destructive/20    \n  `,\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tsm: \"gap-1.25 [&_svg:not([class*=size-])]:size-3.5\",\n\t\t\t\tmd: \"gap-1.5 [&_svg:not([class*=size-])]:size-4\",\n\t\t\t\tlg: \"gap-1.5 [&_svg:not([class*=size-])]:size-4\",\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: \"md\",\n\t\t},\n\t},\n);\n\nfunction Input({\n\tclassName,\n\ttype,\n\tvariant,\n\t...props\n}: React.ComponentProps<\"input\"> & VariantProps<typeof inputVariants>) {\n\treturn (\n\t\t<input\n\t\t\tdata-slot=\"input\"\n\t\t\ttype={type}\n\t\t\tclassName={cn(inputVariants({ variant }), className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction InputAddon({\n\tclassName,\n\tvariant,\n\tmode,\n\t...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputAddonVariants>) {\n\treturn (\n\t\t<div\n\t\t\tdata-slot=\"input-addon\"\n\t\t\tclassName={cn(inputAddonVariants({ variant, mode }), className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction InputGroup({\n\tclassName,\n\t...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputGroupVariants>) {\n\treturn (\n\t\t<div\n\t\t\tdata-slot=\"input-group\"\n\t\t\tclassName={cn(inputGroupVariants(), className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction InputWrapper({\n\tclassName,\n\tvariant,\n\t...props\n}: React.ComponentProps<\"div\"> & VariantProps<typeof inputWrapperVariants>) {\n\treturn (\n\t\t<div\n\t\t\tdata-slot=\"input-wrapper\"\n\t\t\tclassName={cn(\n\t\t\t\tinputVariants({ variant }),\n\t\t\t\tinputWrapperVariants({ variant }),\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nexport {\n\tInput,\n\tInputAddon,\n\tInputGroup,\n\tInputWrapper,\n\tinputVariants,\n\tinputAddonVariants,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,6BAA6B;AAC7B,MAAM,gBAAgB,IAAA,0KAAG,EACxB,CAAC;;;;;;;;EAQA,CAAC,EACF;IACC,UAAU;QACT,SAAS;YACR,IAAI;YACJ,IAAI;YACJ,IAAI;QACL;IACD;IACA,iBAAiB;QAChB,SAAS;IACV;AACD;AAGD,MAAM,qBAAqB,IAAA,0KAAG,EAC7B,wIACA;IACC,UAAU;QACT,SAAS;YACR,IAAI;YACJ,IAAI;YACJ,IAAI;QACL;QACA,MAAM;YACL,SAAS;YACT,MAAM;QACP;IACD;IACA,iBAAiB;QAChB,SAAS;QACT,MAAM;IACP;AACD;AAGD,MAAM,qBAAqB,IAAA,0KAAG,EAC7B,CAAC;;;;;;;;;;;;;;;;EAgBA,CAAC,EACF;IACC,UAAU,CAAC;IACX,iBAAiB,CAAC;AACnB;AAGD,MAAM,uBAAuB,IAAA,0KAAG,EAC/B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA8BA,CAAC,EACF;IACC,UAAU;QACT,SAAS;YACR,IAAI;YACJ,IAAI;YACJ,IAAI;QACL;IACD;IACA,iBAAiB;QAChB,SAAS;IACV;AACD;AAGD,SAAS,MAAM,EACd,SAAS,EACT,IAAI,EACJ,OAAO,EACP,GAAG,OACiE;IACpE,qBACC,6LAAC;QACA,aAAU;QACV,MAAM;QACN,WAAW,IAAA,gJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGZ;KAdS;AAgBT,SAAS,WAAW,EACnB,SAAS,EACT,OAAO,EACP,IAAI,EACJ,GAAG,OACoE;IACvE,qBACC,6LAAC;QACA,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,mBAAmB;YAAE;YAAS;QAAK,IAAI;QACpD,GAAG,KAAK;;;;;;AAGZ;MAbS;AAeT,SAAS,WAAW,EACnB,SAAS,EACT,GAAG,OACoE;IACvE,qBACC,6LAAC;QACA,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,sBAAsB;QACnC,GAAG,KAAK;;;;;;AAGZ;MAXS;AAaT,SAAS,aAAa,EACrB,SAAS,EACT,OAAO,EACP,GAAG,OACsE;IACzE,qBACC,6LAAC;QACA,aAAU;QACV,WAAW,IAAA,gJAAE,EACZ,cAAc;YAAE;QAAQ,IACxB,qBAAqB;YAAE;QAAQ,IAC/B;QAEA,GAAG,KAAK;;;;;;AAGZ;MAhBS"}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/components/ui/label.tsx"],"sourcesContent":["\"use client\";\n\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { Label as LabelPrimitive } from \"radix-ui\";\nimport type * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst labelVariants = cva(\n\t\"text-sm leading-none text-foreground peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tprimary: \"font-medium\",\n\t\t\t\tsecondary: \"font-normal\",\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: \"primary\",\n\t\t},\n\t},\n);\n\nfunction Label({\n\tclassName,\n\tvariant,\n\t...props\n}: React.ComponentProps<typeof LabelPrimitive.Root> &\n\tVariantProps<typeof labelVariants>) {\n\treturn (\n\t\t<LabelPrimitive.Root\n\t\t\tdata-slot=\"label\"\n\t\t\tclassName={cn(labelVariants({ variant }), className)}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nexport { Label };\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,gBAAgB,IAAA,0KAAG,EACxB,kGACA;IACC,UAAU;QACT,SAAS;YACR,SAAS;YACT,WAAW;QACZ;IACD;IACA,iBAAiB;QAChB,SAAS;IACV;AACD;AAGD,SAAS,MAAM,EACd,SAAS,EACT,OAAO,EACP,GAAG,OAE+B;IAClC,qBACC,6LAAC,6OAAc,CAAC,IAAI;QACnB,aAAU;QACV,WAAW,IAAA,gJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGZ;KAbS"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MAkDsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,6CAAA"}},
    {"offset": {"line": 513, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MA6QsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,qEAAA"}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MAuBsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,8CAAA"}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MA6LsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,mDAAA"}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MA0FsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 581, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MA4HsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,oDAAA"}},
    {"offset": {"line": 598, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/server/api/internal/domains.ts"],"sourcesContent":["\"use server\";\n\nimport { revalidatePath } from \"next/cache\";\nimport { db } from \"@/server/db\";\nimport {\n\trequireManagePermission,\n\trequireViewPermission,\n} from \"@/server/api/permissions\";\nimport { z } from \"zod\";\n\n// Validation schemas\nconst AddDomainSchema = z.object({\n\tdomain: z\n\t\t.string()\n\t\t.min(1, \"Domain is required\")\n\t\t.regex(\n\t\t\t/^(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,\n\t\t\t\"Invalid domain format\"\n\t\t)\n\t\t.transform((d) => d.toLowerCase()),\n});\n\n// Get all custom domains for the current tenant\nexport async function getDomains() {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domains = await db.tenantDomain.findMany({\n\t\twhere: { tenantId },\n\t\torderBy: [{ isPrimary: \"desc\" }, { createdAt: \"asc\" }],\n\t});\n\n\treturn domains;\n}\n\n// Get a single domain by ID\nexport async function getDomain(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn domain;\n}\n\n// Add a new custom domain\nexport async function addDomain(input: { domain: string }) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst validated = AddDomainSchema.parse(input);\n\n\t// Check if domain already exists (globally)\n\tconst existingDomain = await db.tenantDomain.findUnique({\n\t\twhere: { domain: validated.domain },\n\t});\n\n\tif (existingDomain) {\n\t\tthrow new Error(\"This domain is already in use\");\n\t}\n\n\t// Check domain limit (e.g., max 5 custom domains per tenant)\n\tconst domainCount = await db.tenantDomain.count({\n\t\twhere: { tenantId },\n\t});\n\n\tif (domainCount >= 5) {\n\t\tthrow new Error(\"Maximum number of custom domains reached (5)\");\n\t}\n\n\t// Create the domain with a verification token\n\tconst domain = await db.tenantDomain.create({\n\t\tdata: {\n\t\t\ttenantId,\n\t\t\tdomain: validated.domain,\n\t\t\tisPrimary: domainCount === 0, // First domain is primary\n\t\t\tsslStatus: \"pending\",\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn domain;\n}\n\n// Remove a custom domain\nexport async function removeDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Don't allow removing the primary domain if others exist\n\tif (domain.isPrimary) {\n\t\tconst otherDomains = await db.tenantDomain.count({\n\t\t\twhere: { tenantId, id: { not: domainId } },\n\t\t});\n\n\t\tif (otherDomains > 0) {\n\t\t\tthrow new Error(\n\t\t\t\t\"Cannot remove primary domain. Set another domain as primary first.\"\n\t\t\t);\n\t\t}\n\t}\n\n\tawait db.tenantDomain.delete({\n\t\twhere: { id: domainId },\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Set a domain as primary\nexport async function setPrimaryDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\tif (!domain.dnsVerified) {\n\t\tthrow new Error(\"Domain must be verified before setting as primary\");\n\t}\n\n\t// Update all domains: unset current primary, set new primary\n\tawait db.$transaction([\n\t\tdb.tenantDomain.updateMany({\n\t\t\twhere: { tenantId, isPrimary: true },\n\t\t\tdata: { isPrimary: false },\n\t\t}),\n\t\tdb.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: { isPrimary: true },\n\t\t}),\n\t]);\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn { success: true };\n}\n\n// Verify domain DNS records\nexport async function verifyDomain(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Perform DNS verification\n\tconst isVerified = await checkDnsVerification(domain.domain, domain.dnsToken);\n\n\tif (isVerified) {\n\t\tawait db.tenantDomain.update({\n\t\t\twhere: { id: domainId },\n\t\t\tdata: {\n\t\t\t\tdnsVerified: true,\n\t\t\t\tsslStatus: \"provisioning\", // SSL will be provisioned by Vercel/Cloudflare\n\t\t\t},\n\t\t});\n\n\t\trevalidatePath(\"/admin/settings/domains\");\n\n\t\treturn { success: true, verified: true };\n\t}\n\n\treturn { success: true, verified: false };\n}\n\n// Refresh verification token\nexport async function refreshDnsToken(domainId: string) {\n\tconst { tenantId } = await requireManagePermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\t// Generate a new token by updating the record (cuid will auto-generate)\n\tconst updated = await db.tenantDomain.update({\n\t\twhere: { id: domainId },\n\t\tdata: {\n\t\t\tdnsToken: generateVerificationToken(),\n\t\t\tdnsVerified: false,\n\t\t},\n\t});\n\n\trevalidatePath(\"/admin/settings/domains\");\n\n\treturn updated;\n}\n\n// Helper function to check DNS TXT record\nasync function checkDnsVerification(\n\tdomain: string,\n\texpectedToken: string\n): Promise<boolean> {\n\ttry {\n\t\t// Use DNS over HTTPS (Cloudflare) for verification\n\t\tconst response = await fetch(\n\t\t\t`https://cloudflare-dns.com/dns-query?name=_boostcart-verification.${domain}&type=TXT`,\n\t\t\t{\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: \"application/dns-json\",\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tif (!response.ok) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (!data.Answer || !Array.isArray(data.Answer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if any TXT record contains our verification token\n\t\tfor (const answer of data.Answer) {\n\t\t\tif (answer.type === 16) {\n\t\t\t\t// TXT record type\n\t\t\t\tconst txtValue = answer.data?.replace(/\"/g, \"\");\n\t\t\t\tif (txtValue === `boostcart-verify=${expectedToken}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t} catch (error) {\n\t\tconsole.error(\"DNS verification error:\", error);\n\t\treturn false;\n\t}\n}\n\n// Helper function to generate verification token\nfunction generateVerificationToken(): string {\n\tconst chars = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\tlet token = \"\";\n\tfor (let i = 0; i < 32; i++) {\n\t\ttoken += chars.charAt(Math.floor(Math.random() * chars.length));\n\t}\n\treturn token;\n}\n\n// Get verification instructions for a domain\nexport async function getDomainVerificationInstructions(domainId: string) {\n\tconst { tenantId } = await requireViewPermission(\"settings\");\n\n\tconst domain = await db.tenantDomain.findFirst({\n\t\twhere: { id: domainId, tenantId },\n\t});\n\n\tif (!domain) {\n\t\tthrow new Error(\"Domain not found\");\n\t}\n\n\treturn {\n\t\tdomain: domain.domain,\n\t\tdnsToken: domain.dnsToken,\n\t\tverified: domain.dnsVerified,\n\t\tinstructions: {\n\t\t\ttype: \"TXT\",\n\t\t\thost: `_boostcart-verification.${domain.domain}`,\n\t\t\tvalue: `boostcart-verify=${domain.dnsToken}`,\n\t\t\tttl: 3600,\n\t\t\tcname: {\n\t\t\t\thost: domain.domain,\n\t\t\t\tvalue: \"cname.boostcart.bg\",\n\t\t\t},\n\t\t},\n\t};\n}\n"],"names":[],"mappings":";;;;;;;MA6JsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 615, "column": 0}, "map": {"version":3,"sources":["file:///Users/bobkata/Projects/boostcart/apps/platform/src/app/%28internal%29/admin/settings/domains/page.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n\tAlertCircle,\n\tCheckCircle2,\n\tClock,\n\tCopy,\n\tExternalLink,\n\tGlobe,\n\tMoreVertical,\n\tPlus,\n\tRefreshCw,\n\tShield,\n\tStar,\n\tTrash2,\n\tXCircle,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Loader } from \"@/components/loader\";\nimport { PolarisButton } from \"@/components/admin/polaris-button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogFooter,\n\tDialogHeader,\n\tDialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n\tDropdownMenu,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuSeparator,\n\tDropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n\tEmpty,\n\tEmptyContent,\n\tEmptyDescription,\n\tEmptyHeader,\n\tEmptyMedia,\n\tEmptyTitle,\n} from \"@/components/ui/empty\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n\taddDomain,\n\tgetDomainVerificationInstructions,\n\tgetDomains,\n\trefreshDnsToken,\n\tremoveDomain,\n\tsetPrimaryDomain,\n\tverifyDomain,\n} from \"@/server/api/internal/domains\";\n\ninterface Domain {\n\tid: string;\n\tdomain: string;\n\tisPrimary: boolean;\n\tsslStatus: string;\n\tsslExpiry: Date | null;\n\tdnsVerified: boolean;\n\tdnsToken: string;\n\tcreatedAt: Date;\n}\n\ninterface VerificationInstructions {\n\tdomain: string;\n\tdnsToken: string;\n\tverified: boolean;\n\tinstructions: {\n\t\ttype: string;\n\t\thost: string;\n\t\tvalue: string;\n\t\tttl: number;\n\t\tcname: {\n\t\t\thost: string;\n\t\t\tvalue: string;\n\t\t};\n\t};\n}\n\nexport default function DomainsPage() {\n\tconst [domains, setDomains] = useState<Domain[]>([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [addDialogOpen, setAddDialogOpen] = useState(false);\n\tconst [verifyDialogOpen, setVerifyDialogOpen] = useState(false);\n\tconst [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n\tconst [selectedDomain, setSelectedDomain] = useState<Domain | null>(null);\n\tconst [newDomain, setNewDomain] = useState(\"\");\n\tconst [addingDomain, setAddingDomain] = useState(false);\n\tconst [verifying, setVerifying] = useState(false);\n\tconst [deleting, setDeleting] = useState(false);\n\tconst [verificationInstructions, setVerificationInstructions] =\n\t\tuseState<VerificationInstructions | null>(null);\n\n\tconst fetchDomains = useCallback(async () => {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tconst data = await getDomains();\n\t\t\tsetDomains(data);\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to load domains\");\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tfetchDomains();\n\t}, [fetchDomains]);\n\n\tconst handleAddDomain = async () => {\n\t\tif (!newDomain.trim()) return;\n\n\t\ttry {\n\t\t\tsetAddingDomain(true);\n\t\t\tawait addDomain({ domain: newDomain.trim() });\n\t\t\ttoast.success(\"Domain added successfully\");\n\t\t\tsetNewDomain(\"\");\n\t\t\tsetAddDialogOpen(false);\n\t\t\tfetchDomains();\n\t\t} catch (error) {\n\t\t\ttoast.error(\n\t\t\t\terror instanceof Error ? error.message : \"Failed to add domain\"\n\t\t\t);\n\t\t} finally {\n\t\t\tsetAddingDomain(false);\n\t\t}\n\t};\n\n\tconst handleVerifyClick = async (domain: Domain) => {\n\t\tsetSelectedDomain(domain);\n\t\ttry {\n\t\t\tconst instructions = await getDomainVerificationInstructions(domain.id);\n\t\t\tsetVerificationInstructions(instructions);\n\t\t\tsetVerifyDialogOpen(true);\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to load verification instructions\");\n\t\t}\n\t};\n\n\tconst handleVerifyDomain = async () => {\n\t\tif (!selectedDomain) return;\n\n\t\ttry {\n\t\t\tsetVerifying(true);\n\t\t\tconst result = await verifyDomain(selectedDomain.id);\n\t\t\tif (result.verified) {\n\t\t\t\ttoast.success(\"Domain verified successfully!\");\n\t\t\t\tsetVerifyDialogOpen(false);\n\t\t\t\tfetchDomains();\n\t\t\t} else {\n\t\t\t\ttoast.error(\n\t\t\t\t\t\"DNS record not found. Please check your DNS settings and try again.\"\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Verification failed\");\n\t\t} finally {\n\t\t\tsetVerifying(false);\n\t\t}\n\t};\n\n\tconst handleRefreshToken = async () => {\n\t\tif (!selectedDomain) return;\n\n\t\ttry {\n\t\t\tconst updated = await refreshDnsToken(selectedDomain.id);\n\t\t\tsetVerificationInstructions((prev) =>\n\t\t\t\tprev\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tdnsToken: updated.dnsToken,\n\t\t\t\t\t\t\tinstructions: {\n\t\t\t\t\t\t\t\t...prev.instructions,\n\t\t\t\t\t\t\t\tvalue: `boostcart-verify=${updated.dnsToken}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t: null\n\t\t\t);\n\t\t\ttoast.success(\"Verification token refreshed\");\n\t\t} catch (_error) {\n\t\t\ttoast.error(\"Failed to refresh token\");\n\t\t}\n\t};\n\n\tconst handleSetPrimary = async (domain: Domain) => {\n\t\ttry {\n\t\t\tawait setPrimaryDomain(domain.id);\n\t\t\ttoast.success(\"Primary domain updated\");\n\t\t\tfetchDomains();\n\t\t} catch (error) {\n\t\t\ttoast.error(\n\t\t\t\terror instanceof Error ? error.message : \"Failed to set primary domain\"\n\t\t\t);\n\t\t}\n\t};\n\n\tconst handleDeleteClick = (domain: Domain) => {\n\t\tsetSelectedDomain(domain);\n\t\tsetDeleteDialogOpen(true);\n\t};\n\n\tconst handleDeleteDomain = async () => {\n\t\tif (!selectedDomain) return;\n\n\t\ttry {\n\t\t\tsetDeleting(true);\n\t\t\tawait removeDomain(selectedDomain.id);\n\t\t\ttoast.success(\"Domain removed\");\n\t\t\tsetDeleteDialogOpen(false);\n\t\t\tfetchDomains();\n\t\t} catch (error) {\n\t\t\ttoast.error(\n\t\t\t\terror instanceof Error ? error.message : \"Failed to remove domain\"\n\t\t\t);\n\t\t} finally {\n\t\t\tsetDeleting(false);\n\t\t}\n\t};\n\n\tconst copyToClipboard = (text: string, label: string) => {\n\t\tnavigator.clipboard.writeText(text);\n\t\ttoast.success(`${label} copied to clipboard`);\n\t};\n\n\tconst getStatusBadge = (domain: Domain) => {\n\t\tif (!domain.dnsVerified) {\n\t\t\treturn (\n\t\t\t\t<Badge variant=\"outline\" className=\"text-amber-600 border-amber-300\">\n\t\t\t\t\t<Clock className=\"h-3 w-3 mr-1\" />\n\t\t\t\t\tPending Verification\n\t\t\t\t</Badge>\n\t\t\t);\n\t\t}\n\n\t\tif (domain.sslStatus === \"active\") {\n\t\t\treturn (\n\t\t\t\t<Badge variant=\"outline\" className=\"text-green-600 border-green-300\">\n\t\t\t\t\t<CheckCircle2 className=\"h-3 w-3 mr-1\" />\n\t\t\t\t\tActive\n\t\t\t\t</Badge>\n\t\t\t);\n\t\t}\n\n\t\tif (domain.sslStatus === \"provisioning\") {\n\t\t\treturn (\n\t\t\t\t<Badge variant=\"outline\" className=\"text-blue-600 border-blue-300\">\n\t\t\t\t\t<RefreshCw className=\"h-3 w-3 mr-1 animate-spin\" />\n\t\t\t\t\tSSL Provisioning\n\t\t\t\t</Badge>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Badge variant=\"outline\" className=\"text-red-600 border-red-300\">\n\t\t\t\t<XCircle className=\"h-3 w-3 mr-1\" />\n\t\t\t\t{domain.sslStatus}\n\t\t\t</Badge>\n\t\t);\n\t};\n\n\tif (loading) {\n\t\treturn (\n\t\t\t<div className=\"flex items-center justify-center h-64\">\n\t\t\t\t<Loader size=\"lg\" />\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t{/* Header */}\n\t\t\t<div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n\t\t\t\t<div>\n\t\t\t\t\t<h1 className=\"text-3xl font-bold tracking-tight\">Custom Domains</h1>\n\t\t\t\t\t<p className=\"text-muted-foreground mt-1\">\n\t\t\t\t\t\tConnect your own domain to your store\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<PolarisButton onClick={() => setAddDialogOpen(true)}>\n\t\t\t\t\t<Plus className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\tAdd Domain\n\t\t\t\t</PolarisButton>\n\t\t\t</div>\n\n\t\t\t{/* Info Card */}\n\t\t\t<Card className=\"p-4 bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800\">\n\t\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t\t<AlertCircle className=\"h-5 w-5 text-blue-600 shrink-0 mt-0.5\" />\n\t\t\t\t\t<div className=\"text-sm\">\n\t\t\t\t\t\t<p className=\"font-medium text-blue-900 dark:text-blue-100\">\n\t\t\t\t\t\t\tHow custom domains work\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className=\"text-blue-700 dark:text-blue-300 mt-1\">\n\t\t\t\t\t\t\tAdd your domain, verify ownership via DNS TXT record, then point\n\t\t\t\t\t\t\tyour domain to our servers. SSL certificates are automatically\n\t\t\t\t\t\t\tprovisioned.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Card>\n\n\t\t\t{/* Domains List */}\n\t\t\t{domains.length === 0 ? (\n\t\t\t\t<Card>\n\t\t\t\t\t<Empty>\n\t\t\t\t\t\t<EmptyHeader>\n\t\t\t\t\t\t\t<EmptyMedia variant=\"icon\">\n\t\t\t\t\t\t\t\t<Globe className=\"h-8 w-8\" />\n\t\t\t\t\t\t\t</EmptyMedia>\n\t\t\t\t\t\t\t<EmptyTitle>No custom domains</EmptyTitle>\n\t\t\t\t\t\t\t<EmptyDescription>\n\t\t\t\t\t\t\t\tAdd a custom domain to give your store a professional look\n\t\t\t\t\t\t\t</EmptyDescription>\n\t\t\t\t\t\t</EmptyHeader>\n\t\t\t\t\t\t<EmptyContent>\n\t\t\t\t\t\t\t<PolarisButton onClick={() => setAddDialogOpen(true)}>\n\t\t\t\t\t\t\t\t<Plus className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\tAdd Your First Domain\n\t\t\t\t\t\t\t</PolarisButton>\n\t\t\t\t\t\t</EmptyContent>\n\t\t\t\t\t</Empty>\n\t\t\t\t</Card>\n\t\t\t) : (\n\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t{domains.map((domain) => (\n\t\t\t\t\t\t<Card key={domain.id} className=\"p-4\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"p-2 rounded-lg bg-muted\">\n\t\t\t\t\t\t\t\t\t\t<Globe className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">{domain.domain}</span>\n\t\t\t\t\t\t\t\t\t\t\t{domain.isPrimary && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-primary/10 text-primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Star className=\"h-3 w-3 mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tPrimary\n\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t{getStatusBadge(domain)}\n\t\t\t\t\t\t\t\t\t\t\t{domain.dnsVerified && (\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-muted-foreground flex items-center gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Shield className=\"h-3 w-3\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tSSL{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{domain.sslStatus === \"active\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Active\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Pending\"}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t{!domain.dnsVerified && (\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleVerifyClick(domain)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tVerify\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<DropdownMenu>\n\t\t\t\t\t\t\t\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"ghost\" size=\"icon\">\n\t\t\t\t\t\t\t\t\t\t\t\t<MoreVertical className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t\t\t\t\t\t<DropdownMenuContent align=\"end\">\n\t\t\t\t\t\t\t\t\t\t\t{domain.dnsVerified && (\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twindow.open(`https://${domain.domain}`, \"_blank\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tVisit Site\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{domain.dnsVerified && !domain.isPrimary && (\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleSetPrimary(domain)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Star className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tSet as Primary\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{!domain.dnsVerified && (\n\t\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleVerifyClick(domain)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RefreshCw className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\tVerify Domain\n\t\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuSeparator />\n\t\t\t\t\t\t\t\t\t\t\t<DropdownMenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-destructive\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteClick(domain)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t\tRemove Domain\n\t\t\t\t\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Add Domain Dialog */}\n\t\t\t<Dialog open={addDialogOpen} onOpenChange={setAddDialogOpen}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Add Custom Domain</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tEnter the domain you want to connect to your store. You&apos;ll\n\t\t\t\t\t\t\tneed to verify ownership and update DNS records.\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4 py-4\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label htmlFor=\"domain\">Domain</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tid=\"domain\"\n\t\t\t\t\t\t\t\tplaceholder=\"store.example.com\"\n\t\t\t\t\t\t\t\tvalue={newDomain}\n\t\t\t\t\t\t\t\tonChange={(e) => setNewDomain(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">\n\t\t\t\t\t\t\t\tEnter your domain without https:// or trailing slashes\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setAddDialogOpen(false)}>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<PolarisButton\n\t\t\t\t\t\t\tonClick={handleAddDomain}\n\t\t\t\t\t\t\tloading={addingDomain}\n\t\t\t\t\t\t\tdisabled={!newDomain.trim()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd Domain\n\t\t\t\t\t\t</PolarisButton>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t{/* Verify Domain Dialog */}\n\t\t\t<Dialog open={verifyDialogOpen} onOpenChange={setVerifyDialogOpen}>\n\t\t\t\t<DialogContent className=\"max-w-2xl\">\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Verify Domain Ownership</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tAdd the following DNS records to verify ownership of{\" \"}\n\t\t\t\t\t\t\t<strong>{verificationInstructions?.domain}</strong>\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t{verificationInstructions && (\n\t\t\t\t\t\t<div className=\"space-y-6 py-4\">\n\t\t\t\t\t\t\t{/* Step 1: TXT Record */}\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t<h4 className=\"font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center justify-center w-6 h-6 rounded-full bg-primary text-primary-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\tAdd TXT Record for Verification\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<Card className=\"p-4 space-y-3\">\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Type</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t\t\t\t{verificationInstructions.instructions.type}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Host</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded truncate\">\n\t\t\t\t\t\t\t\t\t\t\t_boostcart-verification\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 w-8\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(\"_boostcart-verification\", \"Host\")\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Copy className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Value</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded truncate\">\n\t\t\t\t\t\t\t\t\t\t\t{verificationInstructions.instructions.value}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 w-8\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(\n\t\t\t\t\t\t\t\t\t\t\t\t\tverificationInstructions.instructions.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Value\"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Copy className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">TTL</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t\t\t\t{verificationInstructions.instructions.ttl} (or Auto)\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Step 2: CNAME Record */}\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t<h4 className=\"font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center justify-center w-6 h-6 rounded-full bg-primary text-primary-foreground text-sm\">\n\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\tAdd CNAME Record to Point to BoostCart\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<Card className=\"p-4 space-y-3\">\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Type</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t\t\t\tCNAME\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Host</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t\t\t\t@ or{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{verificationInstructions.instructions.cname.host.split(\n\t\t\t\t\t\t\t\t\t\t\t\t\".\"\n\t\t\t\t\t\t\t\t\t\t\t)[0] || \"@\"}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 w-8\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(\n\t\t\t\t\t\t\t\t\t\t\t\t\tverificationInstructions.instructions.cname.host.split(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\".\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)[0] || \"@\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Host\"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Copy className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-[100px_1fr_auto] gap-2 items-center\">\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-muted-foreground\">Value</span>\n\t\t\t\t\t\t\t\t\t\t<code className=\"text-sm bg-muted px-2 py-1 rounded\">\n\t\t\t\t\t\t\t\t\t\t\t{verificationInstructions.instructions.cname.value}\n\t\t\t\t\t\t\t\t\t\t</code>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-8 w-8\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(\n\t\t\t\t\t\t\t\t\t\t\t\t\tverificationInstructions.instructions.cname.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"CNAME Value\"\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Copy className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-950 rounded-lg border border-amber-200 dark:border-amber-800\">\n\t\t\t\t\t\t\t\t<AlertCircle className=\"h-5 w-5 text-amber-600 shrink-0 mt-0.5\" />\n\t\t\t\t\t\t\t\t<div className=\"text-sm text-amber-800 dark:text-amber-200\">\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">DNS changes can take time</p>\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1\">\n\t\t\t\t\t\t\t\t\t\tDNS records may take up to 48 hours to propagate, though\n\t\t\t\t\t\t\t\t\t\tmost changes are visible within minutes.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<DialogFooter className=\"gap-2\">\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={handleRefreshToken} size=\"sm\">\n\t\t\t\t\t\t\t<RefreshCw className=\"h-4 w-4 mr-2\" />\n\t\t\t\t\t\t\tNew Token\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tonClick={() => setVerifyDialogOpen(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<PolarisButton onClick={handleVerifyDomain} loading={verifying}>\n\t\t\t\t\t\t\tVerify DNS\n\t\t\t\t\t\t</PolarisButton>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t{/* Delete Confirmation Dialog */}\n\t\t\t<Dialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>Remove Domain</DialogTitle>\n\t\t\t\t\t\t<DialogDescription>\n\t\t\t\t\t\t\tAre you sure you want to remove{\" \"}\n\t\t\t\t\t\t\t<strong>{selectedDomain?.domain}</strong>? This action cannot be\n\t\t\t\t\t\t\tundone and will make the domain unavailable for your store.\n\t\t\t\t\t\t</DialogDescription>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tonClick={() => setDeleteDialogOpen(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\tonClick={handleDeleteDomain}\n\t\t\t\t\t\t\tdisabled={deleting}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{deleting ? \"Removing...\" : \"Remove Domain\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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"}}]
}